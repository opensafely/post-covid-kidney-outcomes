version: "3.0"

expectations:
  population_size: 50000

actions:

# Extract data required for matching for covid (all STPs)
  extract_covid_matching:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_covid_matching
    outputs:
      highly_sensitive:
        cohort: output/input_covid_matching.csv

#Data management for covid_matching for matching with 2017 general population
  clean_covid_matching_2017:
    run: stata-mp:latest analysis/covid_matching_2017.do
    needs: [extract_covid_matching]
    outputs:
      highly_sensitive:
        analysis_dataset: output/covid_matching_2017.csv
      moderately_sensitive:
        log: logs/covid_matching_2017.log

#Extract data required for matching for 2017 (all STPs)
  extract_2017_matching:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_2017_matching
    outputs:
      highly_sensitive:
        cohort: output/input_2017_matching.csv

#Data management for 2017_matching
  clean_2017_matching:
    run: stata-mp:latest analysis/2017_matching.do
    needs: [extract_2017_matching]
    outputs:
      highly_sensitive:
        analysis_dataset: output/2017_matching.csv
      moderately_sensitive:
        log: logs/2017_matching.log

# Split covid_matching_2017 and 2017_matching by STP
  split_stps_2017:
    run: stata-mp:latest analysis/split_stps_2017.do
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching]
    outputs:
      highly_sensitive:
        covid_1stp5: output/input_covid1_matching_2017_stp5.csv
        covid_1stp6: output/input_covid1_matching_2017_stp6.csv
        covid_1stp7: output/input_covid1_matching_2017_stp7.csv
        covid_1stp8: output/input_covid1_matching_2017_stp8.csv
        covid_1stp9: output/input_covid1_matching_2017_stp9.csv
        covid_1stp10: output/input_covid1_matching_2017_stp10.csv
        covid_1stp12: output/input_covid1_matching_2017_stp12.csv
        covid_1stp13: output/input_covid1_matching_2017_stp13.csv
        covid_1stp14: output/input_covid1_matching_2017_stp14.csv
        covid_1stp15: output/input_covid1_matching_2017_stp15.csv
        covid_1stp16: output/input_covid1_matching_2017_stp16.csv
        covid_1stp17: output/input_covid1_matching_2017_stp17.csv
        covid_1stp20: output/input_covid1_matching_2017_stp20.csv
        covid_1stp21: output/input_covid1_matching_2017_stp21.csv
        covid_1stp22: output/input_covid1_matching_2017_stp22.csv
        covid_1stp23: output/input_covid1_matching_2017_stp23.csv
        covid_1stp24: output/input_covid1_matching_2017_stp24.csv
        covid_1stp25: output/input_covid1_matching_2017_stp25.csv
        covid_1stp26: output/input_covid1_matching_2017_stp26.csv
        covid_1stp27: output/input_covid1_matching_2017_stp27.csv
        covid_1stp29: output/input_covid1_matching_2017_stp29.csv
        covid_1stp33: output/input_covid1_matching_2017_stp33.csv
        covid_1stp35: output/input_covid1_matching_2017_stp35.csv
        covid_1stp36: output/input_covid1_matching_2017_stp36.csv
        covid_1stp37: output/input_covid1_matching_2017_stp37.csv
        covid_1stp40: output/input_covid1_matching_2017_stp40.csv
        covid_1stp41: output/input_covid1_matching_2017_stp41.csv
        covid_1stp42: output/input_covid1_matching_2017_stp42.csv
        covid_1stp43: output/input_covid1_matching_2017_stp43.csv
        covid_1stp44: output/input_covid1_matching_2017_stp44.csv
        covid_1stp49: output/input_covid1_matching_2017_stp49.csv
        covid_2stp5: output/input_covid2_matching_2017_stp5.csv
        covid_2stp6: output/input_covid2_matching_2017_stp6.csv
        covid_2stp7: output/input_covid2_matching_2017_stp7.csv
        covid_2stp8: output/input_covid2_matching_2017_stp8.csv
        covid_2stp9: output/input_covid2_matching_2017_stp9.csv
        covid_2stp10: output/input_covid2_matching_2017_stp10.csv
        covid_2stp12: output/input_covid2_matching_2017_stp12.csv
        covid_2stp13: output/input_covid2_matching_2017_stp13.csv
        covid_2stp14: output/input_covid2_matching_2017_stp14.csv
        covid_2stp15: output/input_covid2_matching_2017_stp15.csv
        covid_2stp16: output/input_covid2_matching_2017_stp16.csv
        covid_2stp17: output/input_covid2_matching_2017_stp17.csv
        covid_2stp20: output/input_covid2_matching_2017_stp20.csv
        covid_2stp21: output/input_covid2_matching_2017_stp21.csv
        covid_2stp22: output/input_covid2_matching_2017_stp22.csv
        covid_2stp23: output/input_covid2_matching_2017_stp23.csv
        covid_2stp24: output/input_covid2_matching_2017_stp24.csv
        covid_2stp25: output/input_covid2_matching_2017_stp25.csv
        covid_2stp26: output/input_covid2_matching_2017_stp26.csv
        covid_2stp27: output/input_covid2_matching_2017_stp27.csv
        covid_2stp29: output/input_covid2_matching_2017_stp29.csv
        covid_2stp33: output/input_covid2_matching_2017_stp33.csv
        covid_2stp35: output/input_covid2_matching_2017_stp35.csv
        covid_2stp36: output/input_covid2_matching_2017_stp36.csv
        covid_2stp37: output/input_covid2_matching_2017_stp37.csv
        covid_2stp40: output/input_covid2_matching_2017_stp40.csv
        covid_2stp41: output/input_covid2_matching_2017_stp41.csv
        covid_2stp42: output/input_covid2_matching_2017_stp42.csv
        covid_2stp43: output/input_covid2_matching_2017_stp43.csv
        covid_2stp44: output/input_covid2_matching_2017_stp44.csv
        covid_2stp49: output/input_covid2_matching_2017_stp49.csv
        covid_3stp5: output/input_covid3_matching_2017_stp5.csv
        covid_3stp6: output/input_covid3_matching_2017_stp6.csv
        covid_3stp7: output/input_covid3_matching_2017_stp7.csv
        covid_3stp8: output/input_covid3_matching_2017_stp8.csv
        covid_3stp9: output/input_covid3_matching_2017_stp9.csv
        covid_3stp10: output/input_covid3_matching_2017_stp10.csv
        covid_3stp12: output/input_covid3_matching_2017_stp12.csv
        covid_3stp13: output/input_covid3_matching_2017_stp13.csv
        covid_3stp14: output/input_covid3_matching_2017_stp14.csv
        covid_3stp15: output/input_covid3_matching_2017_stp15.csv
        covid_3stp16: output/input_covid3_matching_2017_stp16.csv
        covid_3stp17: output/input_covid3_matching_2017_stp17.csv
        covid_3stp20: output/input_covid3_matching_2017_stp20.csv
        covid_3stp21: output/input_covid3_matching_2017_stp21.csv
        covid_3stp22: output/input_covid3_matching_2017_stp22.csv
        covid_3stp23: output/input_covid3_matching_2017_stp23.csv
        covid_3stp24: output/input_covid3_matching_2017_stp24.csv
        covid_3stp25: output/input_covid3_matching_2017_stp25.csv
        covid_3stp26: output/input_covid3_matching_2017_stp26.csv
        covid_3stp27: output/input_covid3_matching_2017_stp27.csv
        covid_3stp29: output/input_covid3_matching_2017_stp29.csv
        covid_3stp33: output/input_covid3_matching_2017_stp33.csv
        covid_3stp35: output/input_covid3_matching_2017_stp35.csv
        covid_3stp36: output/input_covid3_matching_2017_stp36.csv
        covid_3stp37: output/input_covid3_matching_2017_stp37.csv
        covid_3stp40: output/input_covid3_matching_2017_stp40.csv
        covid_3stp41: output/input_covid3_matching_2017_stp41.csv
        covid_3stp42: output/input_covid3_matching_2017_stp42.csv
        covid_3stp43: output/input_covid3_matching_2017_stp43.csv
        covid_3stp44: output/input_covid3_matching_2017_stp44.csv
        covid_3stp49: output/input_covid3_matching_2017_stp49.csv
        covid_4stp5: output/input_covid4_matching_2017_stp5.csv
        covid_4stp6: output/input_covid4_matching_2017_stp6.csv
        covid_4stp7: output/input_covid4_matching_2017_stp7.csv
        covid_4stp8: output/input_covid4_matching_2017_stp8.csv
        covid_4stp9: output/input_covid4_matching_2017_stp9.csv
        covid_4stp10: output/input_covid4_matching_2017_stp10.csv
        covid_4stp12: output/input_covid4_matching_2017_stp12.csv
        covid_4stp13: output/input_covid4_matching_2017_stp13.csv
        covid_4stp14: output/input_covid4_matching_2017_stp14.csv
        covid_4stp15: output/input_covid4_matching_2017_stp15.csv
        covid_4stp16: output/input_covid4_matching_2017_stp16.csv
        covid_4stp17: output/input_covid4_matching_2017_stp17.csv
        covid_4stp20: output/input_covid4_matching_2017_stp20.csv
        covid_4stp21: output/input_covid4_matching_2017_stp21.csv
        covid_4stp22: output/input_covid4_matching_2017_stp22.csv
        covid_4stp23: output/input_covid4_matching_2017_stp23.csv
        covid_4stp24: output/input_covid4_matching_2017_stp24.csv
        covid_4stp25: output/input_covid4_matching_2017_stp25.csv
        covid_4stp26: output/input_covid4_matching_2017_stp26.csv
        covid_4stp27: output/input_covid4_matching_2017_stp27.csv
        covid_4stp29: output/input_covid4_matching_2017_stp29.csv
        covid_4stp33: output/input_covid4_matching_2017_stp33.csv
        covid_4stp35: output/input_covid4_matching_2017_stp35.csv
        covid_4stp36: output/input_covid4_matching_2017_stp36.csv
        covid_4stp37: output/input_covid4_matching_2017_stp37.csv
        covid_4stp40: output/input_covid4_matching_2017_stp40.csv
        covid_4stp41: output/input_covid4_matching_2017_stp41.csv
        covid_4stp42: output/input_covid4_matching_2017_stp42.csv
        covid_4stp43: output/input_covid4_matching_2017_stp43.csv
        covid_4stp44: output/input_covid4_matching_2017_stp44.csv
        covid_4stp49: output/input_covid4_matching_2017_stp49.csv
        2017_stp5: output/input_2017_matching_stp5.csv
        2017_stp6: output/input_2017_matching_stp6.csv
        2017_stp7: output/input_2017_matching_stp7.csv
        2017_stp8: output/input_2017_matching_stp8.csv
        2017_stp9: output/input_2017_matching_stp9.csv
        2017_stp10: output/input_2017_matching_stp10.csv
        2017_stp12: output/input_2017_matching_stp12.csv
        2017_stp13: output/input_2017_matching_stp13.csv
        2017_stp14: output/input_2017_matching_stp14.csv
        2017_stp15: output/input_2017_matching_stp15.csv
        2017_stp16: output/input_2017_matching_stp16.csv
        2017_stp17: output/input_2017_matching_stp17.csv
        2017_stp20: output/input_2017_matching_stp20.csv
        2017_stp21: output/input_2017_matching_stp21.csv
        2017_stp22: output/input_2017_matching_stp22.csv
        2017_stp23: output/input_2017_matching_stp23.csv
        2017_stp24: output/input_2017_matching_stp24.csv
        2017_stp25: output/input_2017_matching_stp25.csv
        2017_stp26: output/input_2017_matching_stp26.csv
        2017_stp27: output/input_2017_matching_stp27.csv
        2017_stp29: output/input_2017_matching_stp29.csv
        2017_stp33: output/input_2017_matching_stp33.csv
        2017_stp35: output/input_2017_matching_stp35.csv
        2017_stp36: output/input_2017_matching_stp36.csv
        2017_stp37: output/input_2017_matching_stp37.csv
        2017_stp40: output/input_2017_matching_stp40.csv
        2017_stp41: output/input_2017_matching_stp41.csv
        2017_stp42: output/input_2017_matching_stp42.csv
        2017_stp43: output/input_2017_matching_stp43.csv
        2017_stp44: output/input_2017_matching_stp44.csv
        2017_stp49: output/input_2017_matching_stp49.csv
      moderately_sensitive:
        log: logs/split_stps_2017.log

  match_2017_stp5:
    run: python:latest python analysis/match_2017_stp5.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp5: output/matching_report_2017_stp5.txt
      highly_sensitive:
        matched_matches_stp5: output/matched_matches_2017_stp5.csv
        matched_cases_stp5: output/matched_cases_2017_stp5.csv
        matched_all_stp5: output/matched_combined_2017_stp5.csv

  match_2017_stp6:
    run: python:latest python analysis/match_2017_stp6.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp6: output/matching_report_2017_stp6.txt
      highly_sensitive:
        matched_matches_stp6: output/matched_matches_2017_stp6.csv
        matched_cases_stp6: output/matched_cases_2017_stp6.csv
        matched_all_stp6: output/matched_combined_2017_stp6.csv

  match_2017_stp7:
    run: python:latest python analysis/match_2017_stp7.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp7: output/matching_report_2017_stp7.txt
      highly_sensitive:
        matched_matches_stp7: output/matched_matches_2017_stp7.csv
        matched_cases_stp7: output/matched_cases_2017_stp7.csv
        matched_all_stp7: output/matched_combined_2017_stp7.csv

  match_2017_stp8:
    run: python:latest python analysis/match_2017_stp8.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp8: output/matching_report_2017_stp8.txt
      highly_sensitive:
        matched_matches_stp8: output/matched_matches_2017_stp8.csv
        matched_cases_stp8: output/matched_cases_2017_stp8.csv
        matched_all_stp8: output/matched_combined_2017_stp8.csv

  match_2017_stp9:
    run: python:latest python analysis/match_2017_stp9.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp9: output/matching_report_2017_stp9.txt
      highly_sensitive:
        matched_matches_stp9: output/matched_matches_2017_stp9.csv
        matched_cases_stp9: output/matched_cases_2017_stp9.csv
        matched_all_stp9: output/matched_combined_2017_stp9.csv

  match_2017_stp10:
    run: python:latest python analysis/match_2017_stp10.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp10: output/matching_report_2017_stp10.txt
      highly_sensitive:
        matched_matches_stp10: output/matched_matches_2017_stp10.csv
        matched_cases_stp10: output/matched_cases_2017_stp10.csv
        matched_all_stp10: output/matched_combined_2017_stp10.csv

  match_2017_stp12:
    run: python:latest python analysis/match_2017_stp12.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp12: output/matching_report_2017_stp12.txt
      highly_sensitive:
        matched_matches_stp12: output/matched_matches_2017_stp12.csv
        matched_cases_stp12: output/matched_cases_2017_stp12.csv
        matched_all_stp12: output/matched_combined_2017_stp12.csv

  match_2017_stp13:
    run: python:latest python analysis/match_2017_stp13.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp13: output/matching_report_2017_stp13.txt
      highly_sensitive:
        matched_matches_stp13: output/matched_matches_2017_stp13.csv
        matched_cases_stp13: output/matched_cases_2017_stp13.csv
        matched_all_stp13: output/matched_combined_2017_stp13.csv

  match_2017_stp14:
    run: python:latest python analysis/match_2017_stp14.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp14: output/matching_report_2017_stp14.txt
      highly_sensitive:
        matched_matches_stp14: output/matched_matches_2017_stp14.csv
        matched_cases_stp14: output/matched_cases_2017_stp14.csv
        matched_all_stp14: output/matched_combined_2017_stp14.csv

  match_2017_stp15:
    run: python:latest python analysis/match_2017_stp15.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp15: output/matching_report_2017_stp15.txt
      highly_sensitive:
        matched_matches_stp15: output/matched_matches_2017_stp15.csv
        matched_cases_stp15: output/matched_cases_2017_stp15.csv
        matched_all_stp15: output/matched_combined_2017_stp15.csv

  match_2017_stp16:
    run: python:latest python analysis/match_2017_stp16.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp16: output/matching_report_2017_stp16.txt
      highly_sensitive:
        matched_matches_stp16: output/matched_matches_2017_stp16.csv
        matched_cases_stp16: output/matched_cases_2017_stp16.csv
        matched_all_stp16: output/matched_combined_2017_stp16.csv

  match_2017_stp17:
    run: python:latest python analysis/match_2017_stp17.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp17: output/matching_report_2017_stp17.txt
      highly_sensitive:
        matched_matches_stp17: output/matched_matches_2017_stp17.csv
        matched_cases_stp17: output/matched_cases_2017_stp17.csv
        matched_all_stp17: output/matched_combined_2017_stp17.csv

  match_2017_stp20:
    run: python:latest python analysis/match_2017_stp20.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp20: output/matching_report_2017_stp20.txt
      highly_sensitive:
        matched_matches_stp20: output/matched_matches_2017_stp20.csv
        matched_cases_stp20: output/matched_cases_2017_stp20.csv
        matched_all_stp20: output/matched_combined_2017_stp20.csv

  match_2017_stp21:
    run: python:latest python analysis/match_2017_stp21.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp21: output/matching_report_2017_stp21.txt
      highly_sensitive:
        matched_matches_stp21: output/matched_matches_2017_stp21.csv
        matched_cases_stp21: output/matched_cases_2017_stp21.csv
        matched_all_stp21: output/matched_combined_2017_stp21.csv

  match_2017_stp22:
    run: python:latest python analysis/match_2017_stp22.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp22: output/matching_report_2017_stp22.txt
      highly_sensitive:
        matched_matches_stp22: output/matched_matches_2017_stp22.csv
        matched_cases_stp22: output/matched_cases_2017_stp22.csv
        matched_all_stp22: output/matched_combined_2017_stp22.csv

  match_2017_stp23:
    run: python:latest python analysis/match_2017_stp23.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp23: output/matching_report_2017_stp23.txt
      highly_sensitive:
        matched_matches_stp23: output/matched_matches_2017_stp23.csv
        matched_cases_stp23: output/matched_cases_2017_stp23.csv
        matched_all_stp23: output/matched_combined_2017_stp23.csv

  match_2017_stp24:
    run: python:latest python analysis/match_2017_stp24.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp24: output/matching_report_2017_stp24.txt
      highly_sensitive:
        matched_matches_stp24: output/matched_matches_2017_stp24.csv
        matched_cases_stp24: output/matched_cases_2017_stp24.csv
        matched_all_stp24: output/matched_combined_2017_stp24.csv

  match_2017_stp25:
    run: python:latest python analysis/match_2017_stp25.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp25: output/matching_report_2017_stp25.txt
      highly_sensitive:
        matched_matches_stp25: output/matched_matches_2017_stp25.csv
        matched_cases_stp25: output/matched_cases_2017_stp25.csv
        matched_all_stp25: output/matched_combined_2017_stp25.csv

  match_2017_stp26:
    run: python:latest python analysis/match_2017_stp26.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp26: output/matching_report_2017_stp26.txt
      highly_sensitive:
        matched_matches_stp26: output/matched_matches_2017_stp26.csv
        matched_cases_stp26: output/matched_cases_2017_stp26.csv
        matched_all_stp26: output/matched_combined_2017_stp26.csv

  match_2017_stp27:
    run: python:latest python analysis/match_2017_stp27.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp27: output/matching_report_2017_stp27.txt
      highly_sensitive:
        matched_matches_stp27: output/matched_matches_2017_stp27.csv
        matched_cases_stp27: output/matched_cases_2017_stp27.csv
        matched_all_stp27: output/matched_combined_2017_stp27.csv

  match_2017_stp29:
    run: python:latest python analysis/match_2017_stp29.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp29: output/matching_report_2017_stp29.txt
      highly_sensitive:
        matched_matches_stp29: output/matched_matches_2017_stp29.csv
        matched_cases_stp29: output/matched_cases_2017_stp29.csv
        matched_all_stp29: output/matched_combined_2017_stp29.csv

  match_2017_stp33:
    run: python:latest python analysis/match_2017_stp33.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp33: output/matching_report_2017_stp33.txt
      highly_sensitive:
        matched_matches_stp33: output/matched_matches_2017_stp33.csv
        matched_cases_stp33: output/matched_cases_2017_stp33.csv
        matched_all_stp33: output/matched_combined_2017_stp33.csv

  match_2017_stp35:
    run: python:latest python analysis/match_2017_stp35.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp35: output/matching_report_2017_stp35.txt
      highly_sensitive:
        matched_matches_stp35: output/matched_matches_2017_stp35.csv
        matched_cases_stp35: output/matched_cases_2017_stp35.csv
        matched_all_stp35: output/matched_combined_2017_stp35.csv

  match_2017_stp36:
    run: python:latest python analysis/match_2017_stp36.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp36: output/matching_report_2017_stp36.txt
      highly_sensitive:
        matched_matches_stp36: output/matched_matches_2017_stp36.csv
        matched_cases_stp36: output/matched_cases_2017_stp36.csv
        matched_all_stp36: output/matched_combined_2017_stp36.csv

  match_2017_stp37:
    run: python:latest python analysis/match_2017_stp37.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp37: output/matching_report_2017_stp37.txt
      highly_sensitive:
        matched_matches_stp37: output/matched_matches_2017_stp37.csv
        matched_cases_stp37: output/matched_cases_2017_stp37.csv
        matched_all_stp37: output/matched_combined_2017_stp37.csv

  match_2017_stp40:
    run: python:latest python analysis/match_2017_stp40.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp40: output/matching_report_2017_stp40.txt
      highly_sensitive:
        matched_matches_stp40: output/matched_matches_2017_stp40.csv
        matched_cases_stp40: output/matched_cases_2017_stp40.csv
        matched_all_stp40: output/matched_combined_2017_stp40.csv

  match_2017_stp41:
    run: python:latest python analysis/match_2017_stp41.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp41: output/matching_report_2017_stp41.txt
      highly_sensitive:
        matched_matches_stp41: output/matched_matches_2017_stp41.csv
        matched_cases_stp41: output/matched_cases_2017_stp41.csv
        matched_all_stp41: output/matched_combined_2017_stp41.csv

  match_2017_stp42:
    run: python:latest python analysis/match_2017_stp42.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp42: output/matching_report_2017_stp42.txt
      highly_sensitive:
        matched_matches_stp42: output/matched_matches_2017_stp42.csv
        matched_cases_stp42: output/matched_cases_2017_stp42.csv
        matched_all_stp42: output/matched_combined_2017_stp42.csv

  match_2017_stp43:
    run: python:latest python analysis/match_2017_stp43.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp43: output/matching_report_2017_stp43.txt
      highly_sensitive:
        matched_matches_stp43: output/matched_matches_2017_stp43.csv
        matched_cases_stp43: output/matched_cases_2017_stp43.csv
        matched_all_stp43: output/matched_combined_2017_stp43.csv

  match_2017_stp44:
    run: python:latest python analysis/match_2017_stp44.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp44: output/matching_report_2017_stp44.txt
      highly_sensitive:
        matched_matches_stp44: output/matched_matches_2017_stp44.csv
        matched_cases_stp44: output/matched_cases_2017_stp44.csv
        matched_all_stp44: output/matched_combined_2017_stp44.csv

  match_2017_stp49:
    run: python:latest python analysis/match_2017_stp49.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_stp49: output/matching_report_2017_stp49.txt
      highly_sensitive:
        matched_matches_stp49: output/matched_matches_2017_stp49.csv
        matched_cases_stp49: output/matched_cases_2017_stp49.csv
        matched_all_stp49: output/matched_combined_2017_stp49.csv

  combine_stps_covid_2017:
    run: stata-mp:latest analysis/combine_stps_covid_2017.do
    needs: [match_2017_stp5, match_2017_stp6, match_2017_stp7, match_2017_stp8, match_2017_stp9,
    match_2017_stp10, match_2017_stp12, match_2017_stp13, match_2017_stp14, match_2017_stp15,
    match_2017_stp16, match_2017_stp17, match_2017_stp20, match_2017_stp21, match_2017_stp22,
    match_2017_stp23, match_2017_stp24, match_2017_stp25, match_2017_stp26, match_2017_stp27,
    match_2017_stp29, match_2017_stp33, match_2017_stp35, match_2017_stp36, match_2017_stp37, 
    match_2017_stp40, match_2017_stp41, match_2017_stp42, match_2017_stp43, match_2017_stp44, 
    match_2017_stp49]
    outputs:
      highly_sensitive:
        matched_cases_combined: output/input_combined_stps_covid_2017.csv
      moderately_sensitive:
        log: logs/combine_stps_covid_2017.log

  combine_stps_matches_2017:
    run: stata-mp:latest analysis/combine_stps_matches_2017.do
    needs: [match_2017_stp5, match_2017_stp6, match_2017_stp7, match_2017_stp8, match_2017_stp9,
    match_2017_stp10, match_2017_stp12, match_2017_stp13, match_2017_stp14, match_2017_stp15,
    match_2017_stp16, match_2017_stp17, match_2017_stp20, match_2017_stp21, match_2017_stp22,
    match_2017_stp23, match_2017_stp24, match_2017_stp25, match_2017_stp26, match_2017_stp27,
    match_2017_stp29, match_2017_stp33, match_2017_stp35, match_2017_stp36, match_2017_stp37, 
    match_2017_stp40, match_2017_stp41, match_2017_stp42, match_2017_stp43, match_2017_stp44, 
    match_2017_stp49]
    outputs:
      highly_sensitive:
        matched_matches_combined: output/input_combined_stps_matches_2017.csv
      moderately_sensitive:
        log: logs/combine_stps_matches_2017.log

#Data management for covid_matching for matching with 2020 general population
  clean_covid_matching_2020:
    run: stata-mp:latest analysis/covid_matching_2020.do
    needs: [extract_covid_matching]
    outputs:
      highly_sensitive:
        analysis_dataset: output/covid_matching_2020.csv
      moderately_sensitive:
        log: logs/covid_matching_2020.log

#Extract data required for matching for 2020 (all STPs)
  extract_2020_matching:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_2020_matching
    outputs:
      highly_sensitive:
        cohort: output/input_2020_matching.csv

#Data management for 2020_matching
  clean_2020_matching:
    run: stata-mp:latest analysis/2020_matching.do
    needs: [extract_2020_matching]
    outputs:
      highly_sensitive:
        analysis_dataset: output/2020_matching.csv
      moderately_sensitive:
        log: logs/2020_matching.log

# Split covid_matching and 2020_matching by STP
  split_stps_2020:
    run: stata-mp:latest analysis/split_stps_2020.do
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching]
    outputs:
      highly_sensitive:
        covid_stp5: output/input_covid_matching_2020_stp5.csv
        covid_stp6: output/input_covid_matching_2020_stp6.csv
        covid_stp7: output/input_covid_matching_2020_stp7.csv
        covid_stp8: output/input_covid_matching_2020_stp8.csv
        covid_stp9: output/input_covid_matching_2020_stp9.csv
        covid_stp10: output/input_covid_matching_2020_stp10.csv
        covid_stp12: output/input_covid_matching_2020_stp12.csv
        covid_stp13: output/input_covid_matching_2020_stp13.csv
        covid_stp14: output/input_covid_matching_2020_stp14.csv
        covid_stp15: output/input_covid_matching_2020_stp15.csv
        covid_stp16: output/input_covid_matching_2020_stp16.csv
        covid_stp17: output/input_covid_matching_2020_stp17.csv
        covid_stp20: output/input_covid_matching_2020_stp20.csv
        covid_stp21: output/input_covid_matching_2020_stp21.csv
        covid_stp22: output/input_covid_matching_2020_stp22.csv
        covid_stp23: output/input_covid_matching_2020_stp23.csv
        covid_stp24: output/input_covid_matching_2020_stp24.csv
        covid_stp25: output/input_covid_matching_2020_stp25.csv
        covid_stp26: output/input_covid_matching_2020_stp26.csv
        covid_stp27: output/input_covid_matching_2020_stp27.csv
        covid_stp29: output/input_covid_matching_2020_stp29.csv
        covid_stp33: output/input_covid_matching_2020_stp33.csv
        covid_stp35: output/input_covid_matching_2020_stp35.csv
        covid_stp36: output/input_covid_matching_2020_stp36.csv
        covid_stp37: output/input_covid_matching_2020_stp37.csv
        covid_stp40: output/input_covid_matching_2020_stp40.csv
        covid_stp41: output/input_covid_matching_2020_stp41.csv
        covid_stp42: output/input_covid_matching_2020_stp42.csv
        covid_stp43: output/input_covid_matching_2020_stp43.csv
        covid_stp44: output/input_covid_matching_2020_stp44.csv
        covid_stp49: output/input_covid_matching_2020_stp49.csv
        2020_stp5: output/input_2020_matching_stp5.csv
        2020_stp6: output/input_2020_matching_stp6.csv
        2020_stp7: output/input_2020_matching_stp7.csv
        2020_stp8: output/input_2020_matching_stp8.csv
        2020_stp9: output/input_2020_matching_stp9.csv
        2020_stp10: output/input_2020_matching_stp10.csv
        2020_stp12: output/input_2020_matching_stp12.csv
        2020_stp13: output/input_2020_matching_stp13.csv
        2020_stp14: output/input_2020_matching_stp14.csv
        2020_stp15: output/input_2020_matching_stp15.csv
        2020_stp16: output/input_2020_matching_stp16.csv
        2020_stp17: output/input_2020_matching_stp17.csv
        2020_stp20: output/input_2020_matching_stp20.csv
        2020_stp21: output/input_2020_matching_stp21.csv
        2020_stp22: output/input_2020_matching_stp22.csv
        2020_stp23: output/input_2020_matching_stp23.csv
        2020_stp24: output/input_2020_matching_stp24.csv
        2020_stp25: output/input_2020_matching_stp25.csv
        2020_stp26: output/input_2020_matching_stp26.csv
        2020_stp27: output/input_2020_matching_stp27.csv
        2020_stp29: output/input_2020_matching_stp29.csv
        2020_stp33: output/input_2020_matching_stp33.csv
        2020_stp35: output/input_2020_matching_stp35.csv
        2020_stp36: output/input_2020_matching_stp36.csv
        2020_stp37: output/input_2020_matching_stp37.csv
        2020_stp40: output/input_2020_matching_stp40.csv
        2020_stp41: output/input_2020_matching_stp41.csv
        2020_stp42: output/input_2020_matching_stp42.csv
        2020_stp43: output/input_2020_matching_stp43.csv
        2020_stp44: output/input_2020_matching_stp44.csv
        2020_stp49: output/input_2020_matching_stp49.csv
      moderately_sensitive:
        log: logs/split_stps_2020.log

  match_2020_stp5:
    run: python:latest python analysis/match_2020_stp5.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp5: output/matching_report_2020_stp5.txt
      highly_sensitive:
        matched_matches_stp5: output/matched_matches_2020_stp5.csv
        matched_cases_stp5: output/matched_cases_2020_stp5.csv
        matched_all_stp5: output/matched_combined_2020_stp5.csv

  match_2020_stp6:
    run: python:latest python analysis/match_2020_stp6.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp6: output/matching_report_2020_stp6.txt
      highly_sensitive:
        matched_matches_stp6: output/matched_matches_2020_stp6.csv
        matched_cases_stp6: output/matched_cases_2020_stp6.csv
        matched_all_stp6: output/matched_combined_2020_stp6.csv

  match_2020_stp7:
    run: python:latest python analysis/match_2020_stp7.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp7: output/matching_report_2020_stp7.txt
      highly_sensitive:
        matched_matches_stp7: output/matched_matches_2020_stp7.csv
        matched_cases_stp7: output/matched_cases_2020_stp7.csv
        matched_all_stp7: output/matched_combined_2020_stp7.csv

  match_2020_stp8:
    run: python:latest python analysis/match_2020_stp8.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp8: output/matching_report_2020_stp8.txt
      highly_sensitive:
        matched_matches_stp8: output/matched_matches_2020_stp8.csv
        matched_cases_stp8: output/matched_cases_2020_stp8.csv
        matched_all_stp8: output/matched_combined_2020_stp8.csv

  match_2020_stp9:
    run: python:latest python analysis/match_2020_stp9.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp9: output/matching_report_2020_stp9.txt
      highly_sensitive:
        matched_matches_stp9: output/matched_matches_2020_stp9.csv
        matched_cases_stp9: output/matched_cases_2020_stp9.csv
        matched_all_stp9: output/matched_combined_2020_stp9.csv

  match_2020_stp10:
    run: python:latest python analysis/match_2020_stp10.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp10: output/matching_report_2020_stp10.txt
      highly_sensitive:
        matched_matches_stp10: output/matched_matches_2020_stp10.csv
        matched_cases_stp10: output/matched_cases_2020_stp10.csv
        matched_all_stp10: output/matched_combined_2020_stp10.csv

  match_2020_stp12:
    run: python:latest python analysis/match_2020_stp12.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp12: output/matching_report_2020_stp12.txt
      highly_sensitive:
        matched_matches_stp12: output/matched_matches_2020_stp12.csv
        matched_cases_stp12: output/matched_cases_2020_stp12.csv
        matched_all_stp12: output/matched_combined_2020_stp12.csv

  match_2020_stp13:
    run: python:latest python analysis/match_2020_stp13.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp13: output/matching_report_2020_stp13.txt
      highly_sensitive:
        matched_matches_stp13: output/matched_matches_2020_stp13.csv
        matched_cases_stp13: output/matched_cases_2020_stp13.csv
        matched_all_stp13: output/matched_combined_2020_stp13.csv

  match_2020_stp14:
    run: python:latest python analysis/match_2020_stp14.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp14: output/matching_report_2020_stp14.txt
      highly_sensitive:
        matched_matches_stp14: output/matched_matches_2020_stp14.csv
        matched_cases_stp14: output/matched_cases_2020_stp14.csv
        matched_all_stp14: output/matched_combined_2020_stp14.csv

  match_2020_stp15:
    run: python:latest python analysis/match_2020_stp15.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp15: output/matching_report_2020_stp15.txt
      highly_sensitive:
        matched_matches_stp15: output/matched_matches_2020_stp15.csv
        matched_cases_stp15: output/matched_cases_2020_stp15.csv
        matched_all_stp15: output/matched_combined_2020_stp15.csv

  match_2020_stp16:
    run: python:latest python analysis/match_2020_stp16.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp16: output/matching_report_2020_stp16.txt
      highly_sensitive:
        matched_matches_stp16: output/matched_matches_2020_stp16.csv
        matched_cases_stp16: output/matched_cases_2020_stp16.csv
        matched_all_stp16: output/matched_combined_2020_stp16.csv

  match_2020_stp17:
    run: python:latest python analysis/match_2020_stp17.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp17: output/matching_report_2020_stp17.txt
      highly_sensitive:
        matched_matches_stp17: output/matched_matches_2020_stp17.csv
        matched_cases_stp17: output/matched_cases_2020_stp17.csv
        matched_all_stp17: output/matched_combined_2020_stp17.csv

  match_2020_stp20:
    run: python:latest python analysis/match_2020_stp20.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp20: output/matching_report_2020_stp20.txt
      highly_sensitive:
        matched_matches_stp20: output/matched_matches_2020_stp20.csv
        matched_cases_stp20: output/matched_cases_2020_stp20.csv
        matched_all_stp20: output/matched_combined_2020_stp20.csv

  match_2020_stp21:
    run: python:latest python analysis/match_2020_stp21.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp21: output/matching_report_2020_stp21.txt
      highly_sensitive:
        matched_matches_stp21: output/matched_matches_2020_stp21.csv
        matched_cases_stp21: output/matched_cases_2020_stp21.csv
        matched_all_stp21: output/matched_combined_2020_stp21.csv

  match_2020_stp22:
    run: python:latest python analysis/match_2020_stp22.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp22: output/matching_report_2020_stp22.txt
      highly_sensitive:
        matched_matches_stp22: output/matched_matches_2020_stp22.csv
        matched_cases_stp22: output/matched_cases_2020_stp22.csv
        matched_all_stp22: output/matched_combined_2020_stp22.csv

  match_2020_stp23:
    run: python:latest python analysis/match_2020_stp23.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp23: output/matching_report_2020_stp23.txt
      highly_sensitive:
        matched_matches_stp23: output/matched_matches_2020_stp23.csv
        matched_cases_stp23: output/matched_cases_2020_stp23.csv
        matched_all_stp23: output/matched_combined_2020_stp23.csv

  match_2020_stp24:
    run: python:latest python analysis/match_2020_stp24.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp24: output/matching_report_2020_stp24.txt
      highly_sensitive:
        matched_matches_stp24: output/matched_matches_2020_stp24.csv
        matched_cases_stp24: output/matched_cases_2020_stp24.csv
        matched_all_stp24: output/matched_combined_2020_stp24.csv

  match_2020_stp25:
    run: python:latest python analysis/match_2020_stp25.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp25: output/matching_report_2020_stp25.txt
      highly_sensitive:
        matched_matches_stp25: output/matched_matches_2020_stp25.csv
        matched_cases_stp25: output/matched_cases_2020_stp25.csv
        matched_all_stp25: output/matched_combined_2020_stp25.csv

  match_2020_stp26:
    run: python:latest python analysis/match_2020_stp26.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp26: output/matching_report_2020_stp26.txt
      highly_sensitive:
        matched_matches_stp26: output/matched_matches_2020_stp26.csv
        matched_cases_stp26: output/matched_cases_2020_stp26.csv
        matched_all_stp26: output/matched_combined_2020_stp26.csv

  match_2020_stp27:
    run: python:latest python analysis/match_2020_stp27.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp27: output/matching_report_2020_stp27.txt
      highly_sensitive:
        matched_matches_stp27: output/matched_matches_2020_stp27.csv
        matched_cases_stp27: output/matched_cases_2020_stp27.csv
        matched_all_stp27: output/matched_combined_2020_stp27.csv

  match_2020_stp29:
    run: python:latest python analysis/match_2020_stp29.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp29: output/matching_report_2020_stp29.txt
      highly_sensitive:
        matched_matches_stp29: output/matched_matches_2020_stp29.csv
        matched_cases_stp29: output/matched_cases_2020_stp29.csv
        matched_all_stp29: output/matched_combined_2020_stp29.csv

  match_2020_stp33:
    run: python:latest python analysis/match_2020_stp33.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp33: output/matching_report_2020_stp33.txt
      highly_sensitive:
        matched_matches_stp33: output/matched_matches_2020_stp33.csv
        matched_cases_stp33: output/matched_cases_2020_stp33.csv
        matched_all_stp33: output/matched_combined_2020_stp33.csv

  match_2020_stp35:
    run: python:latest python analysis/match_2020_stp35.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp35: output/matching_report_2020_stp35.txt
      highly_sensitive:
        matched_matches_stp35: output/matched_matches_2020_stp35.csv
        matched_cases_stp35: output/matched_cases_2020_stp35.csv
        matched_all_stp35: output/matched_combined_2020_stp35.csv

  match_2020_stp36:
    run: python:latest python analysis/match_2020_stp36.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp36: output/matching_report_2020_stp36.txt
      highly_sensitive:
        matched_matches_stp36: output/matched_matches_2020_stp36.csv
        matched_cases_stp36: output/matched_cases_2020_stp36.csv
        matched_all_stp36: output/matched_combined_2020_stp36.csv

  match_2020_stp37:
    run: python:latest python analysis/match_2020_stp37.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp37: output/matching_report_2020_stp37.txt
      highly_sensitive:
        matched_matches_stp37: output/matched_matches_2020_stp37.csv
        matched_cases_stp37: output/matched_cases_2020_stp37.csv
        matched_all_stp37: output/matched_combined_2020_stp37.csv

  match_2020_stp40:
    run: python:latest python analysis/match_2020_stp40.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp40: output/matching_report_2020_stp40.txt
      highly_sensitive:
        matched_matches_stp40: output/matched_matches_2020_stp40.csv
        matched_cases_stp40: output/matched_cases_2020_stp40.csv
        matched_all_stp40: output/matched_combined_2020_stp40.csv

  match_2020_stp41:
    run: python:latest python analysis/match_2020_stp41.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp41: output/matching_report_2020_stp41.txt
      highly_sensitive:
        matched_matches_stp41: output/matched_matches_2020_stp41.csv
        matched_cases_stp41: output/matched_cases_2020_stp41.csv
        matched_all_stp41: output/matched_combined_2020_stp41.csv

  match_2020_stp42:
    run: python:latest python analysis/match_2020_stp42.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp42: output/matching_report_2020_stp42.txt
      highly_sensitive:
        matched_matches_stp42: output/matched_matches_2020_stp42.csv
        matched_cases_stp42: output/matched_cases_2020_stp42.csv
        matched_all_stp42: output/matched_combined_2020_stp42.csv

  match_2020_stp43:
    run: python:latest python analysis/match_2020_stp43.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp43: output/matching_report_2020_stp43.txt
      highly_sensitive:
        matched_matches_stp43: output/matched_matches_2020_stp43.csv
        matched_cases_stp43: output/matched_cases_2020_stp43.csv
        matched_all_stp43: output/matched_combined_2020_stp43.csv

  match_2020_stp44:
    run: python:latest python analysis/match_2020_stp44.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp44: output/matching_report_2020_stp44.txt
      highly_sensitive:
        matched_matches_stp44: output/matched_matches_2020_stp44.csv
        matched_cases_stp44: output/matched_cases_2020_stp44.csv
        matched_all_stp44: output/matched_combined_2020_stp44.csv

  match_2020_stp49:
    run: python:latest python analysis/match_2020_stp49.py
    needs: [extract_covid_matching, clean_covid_matching_2020, extract_2020_matching, clean_2020_matching, split_stps_2020]
    outputs:
      moderately_sensitive:
        matching_report_stp49: output/matching_report_2020_stp49.txt
      highly_sensitive:
        matched_matches_stp49: output/matched_matches_2020_stp49.csv
        matched_cases_stp49: output/matched_cases_2020_stp49.csv
        matched_all_stp49: output/matched_combined_2020_stp49.csv

  combine_stps_covid_2020:
    run: stata-mp:latest analysis/combine_stps_covid_2020.do
    needs: [match_2020_stp5, match_2020_stp6, match_2020_stp7, match_2020_stp8, match_2020_stp9,
    match_2020_stp10, match_2020_stp12, match_2020_stp13, match_2020_stp14, match_2020_stp15,
    match_2020_stp16, match_2020_stp17, match_2020_stp20, match_2020_stp21, match_2020_stp22,
    match_2020_stp23, match_2020_stp24, match_2020_stp25, match_2020_stp26, match_2020_stp27,
    match_2020_stp29, match_2020_stp33, match_2020_stp35, match_2020_stp36, match_2020_stp37, 
    match_2020_stp40, match_2020_stp41, match_2020_stp42, match_2020_stp43, match_2020_stp44, 
    match_2020_stp49]
    outputs:
      highly_sensitive:
        matched_cases_combined: output/input_combined_stps_covid_2020.csv
      moderately_sensitive:
        log: logs/combine_stps_covid_2020.log

  combine_stps_matches_2020:
    run: stata-mp:latest analysis/combine_stps_matches_2020.do
    needs: [match_2020_stp5, match_2020_stp6, match_2020_stp7, match_2020_stp8, match_2020_stp9,
    match_2020_stp10, match_2020_stp12, match_2020_stp13, match_2020_stp14, match_2020_stp15,
    match_2020_stp16, match_2020_stp17, match_2020_stp20, match_2020_stp21, match_2020_stp22,
    match_2020_stp23, match_2020_stp24, match_2020_stp25, match_2020_stp26, match_2020_stp27,
    match_2020_stp29, match_2020_stp33, match_2020_stp35, match_2020_stp36, match_2020_stp37, 
    match_2020_stp40, match_2020_stp41, match_2020_stp42, match_2020_stp43, match_2020_stp44, 
    match_2020_stp49]
    outputs:
      highly_sensitive:
        matched_matches_combined: output/input_combined_stps_matches_2020.csv
      moderately_sensitive:
        log: logs/combine_stps_matches_2020.log

  extract_covid_2017_additional:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_covid_2017_additional 
    needs: [combine_stps_covid_2017]
    outputs:
      highly_sensitive:
        cohort: output/input_covid_2017_additional.csv

  extract_covid_2020_additional:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_covid_2020_additional 
    needs: [combine_stps_covid_2020]
    outputs:
      highly_sensitive:
        cohort: output/input_covid_2020_additional.csv

  extract_2017_additional:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_2017_additional 
    needs: [combine_stps_matches_2017]
    outputs:
      highly_sensitive:
        cohort: output/input_2017_additional.csv

  extract_2020_additional:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_2020_additional 
    needs: [combine_stps_matches_2020]
    outputs:
      highly_sensitive:
        cohort: output/input_2020_additional.csv

  codebook_2017_additional:
    run: stata-mp:latest analysis/codebook_2017_additional.do
    needs: [extract_covid_2017_additional, extract_2017_additional]
    outputs:
      moderately_sensitive:
        log: logs/codebook_2017_additional.log

  codebook_2020_additional:
    run: stata-mp:latest analysis/codebook_2020_additional.do
    needs: [extract_covid_2020_additional, extract_2020_additional]
    outputs:
      moderately_sensitive:
        log: logs/codebook_2020_additional.log

  analysis_2017:
    run: stata-mp:latest analysis/analysis_2017.do
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017, match_2017_stp5, match_2017_stp6, match_2017_stp7, match_2017_stp8, match_2017_stp9, match_2017_stp10, match_2017_stp12, match_2017_stp13, match_2017_stp14, match_2017_stp15, match_2017_stp16, match_2017_stp17, match_2017_stp20, match_2017_stp21, match_2017_stp22, match_2017_stp23, match_2017_stp24, match_2017_stp25, match_2017_stp26, match_2017_stp27, match_2017_stp29, match_2017_stp33, match_2017_stp35, match_2017_stp36, match_2017_stp37, match_2017_stp40, match_2017_stp41, match_2017_stp42, match_2017_stp43, match_2017_stp44, match_2017_stp49, combine_stps_covid_2017, combine_stps_matches_2017, extract_covid_2017_additional, extract_2017_additional]
    outputs:
      highly_sensitive:
        analysis: output/analysis_2017.dta
      moderately_sensitive:
        log: logs/analysis_2017.log

  descriptive_2017:
    run: stata-mp:latest analysis/descriptive_2017.do
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017, match_2017_stp5, match_2017_stp6, match_2017_stp7, match_2017_stp8, match_2017_stp9, match_2017_stp10, match_2017_stp12, match_2017_stp13, match_2017_stp14, match_2017_stp15, match_2017_stp16, match_2017_stp17, match_2017_stp20, match_2017_stp21, match_2017_stp22, match_2017_stp23, match_2017_stp24, match_2017_stp25, match_2017_stp26, match_2017_stp27, match_2017_stp29, match_2017_stp33, match_2017_stp35, match_2017_stp36, match_2017_stp37, match_2017_stp40, match_2017_stp41, match_2017_stp42, match_2017_stp43, match_2017_stp44, match_2017_stp49, combine_stps_covid_2017, combine_stps_matches_2017, extract_covid_2017_additional, extract_2017_additional, analysis_2017]
    outputs:
      moderately_sensitive:
        log: logs/descriptive_2017.log

  cox_esrd_2017:
    run: stata-mp:latest analysis/cox_esrd_2017.do
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017, match_2017_stp5, match_2017_stp6, match_2017_stp7, match_2017_stp8, match_2017_stp9, match_2017_stp10, match_2017_stp12, match_2017_stp13, match_2017_stp14, match_2017_stp15, match_2017_stp16, match_2017_stp17, match_2017_stp20, match_2017_stp21, match_2017_stp22, match_2017_stp23, match_2017_stp24, match_2017_stp25, match_2017_stp26, match_2017_stp27, match_2017_stp29, match_2017_stp33, match_2017_stp35, match_2017_stp36, match_2017_stp37, match_2017_stp40, match_2017_stp41, match_2017_stp42, match_2017_stp43, match_2017_stp44, match_2017_stp49, combine_stps_covid_2017, combine_stps_matches_2017, extract_covid_2017_additional, extract_2017_additional, analysis_2017]
    outputs:
      moderately_sensitive:
        log: logs/cox_esrd_2017.log

  cox_egfr_half_2017:
    run: stata-mp:latest analysis/cox_egfr_half_2017.do
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017, match_2017_stp5, match_2017_stp6, match_2017_stp7, match_2017_stp8, match_2017_stp9, match_2017_stp10, match_2017_stp12, match_2017_stp13, match_2017_stp14, match_2017_stp15, match_2017_stp16, match_2017_stp17, match_2017_stp20, match_2017_stp21, match_2017_stp22, match_2017_stp23, match_2017_stp24, match_2017_stp25, match_2017_stp26, match_2017_stp27, match_2017_stp29, match_2017_stp33, match_2017_stp35, match_2017_stp36, match_2017_stp37, match_2017_stp40, match_2017_stp41, match_2017_stp42, match_2017_stp43, match_2017_stp44, match_2017_stp49, combine_stps_covid_2017, combine_stps_matches_2017, extract_covid_2017_additional, extract_2017_additional, analysis_2017]
    outputs:
      moderately_sensitive:
        log: logs/cox_egfr_half_2017.log

  cox_aki_2017:
    run: stata-mp:latest analysis/cox_aki_2017.do
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017, match_2017_stp5, match_2017_stp6, match_2017_stp7, match_2017_stp8, match_2017_stp9, match_2017_stp10, match_2017_stp12, match_2017_stp13, match_2017_stp14, match_2017_stp15, match_2017_stp16, match_2017_stp17, match_2017_stp20, match_2017_stp21, match_2017_stp22, match_2017_stp23, match_2017_stp24, match_2017_stp25, match_2017_stp26, match_2017_stp27, match_2017_stp29, match_2017_stp33, match_2017_stp35, match_2017_stp36, match_2017_stp37, match_2017_stp40, match_2017_stp41, match_2017_stp42, match_2017_stp43, match_2017_stp44, match_2017_stp49, combine_stps_covid_2017, combine_stps_matches_2017, extract_covid_2017_additional, extract_2017_additional, analysis_2017]
    outputs:
      moderately_sensitive:
        log: logs/cox_aki_2017.log

  cox_death_2017:
    run: stata-mp:latest analysis/cox_death_2017.do
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017, match_2017_stp5, match_2017_stp6, match_2017_stp7, match_2017_stp8, match_2017_stp9, match_2017_stp10, match_2017_stp12, match_2017_stp13, match_2017_stp14, match_2017_stp15, match_2017_stp16, match_2017_stp17, match_2017_stp20, match_2017_stp21, match_2017_stp22, match_2017_stp23, match_2017_stp24, match_2017_stp25, match_2017_stp26, match_2017_stp27, match_2017_stp29, match_2017_stp33, match_2017_stp35, match_2017_stp36, match_2017_stp37, match_2017_stp40, match_2017_stp41, match_2017_stp42, match_2017_stp43, match_2017_stp44, match_2017_stp49, combine_stps_covid_2017, combine_stps_matches_2017, extract_covid_2017_additional, extract_2017_additional, analysis_2017]
    outputs:
      moderately_sensitive:
        log: logs/cox_death_2017.log

# Extract data required for matching for covid up to May 2021 (all STPs)
  extract_covid2021_matching:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_covid2021_matching
    outputs:
      highly_sensitive:
        cohort: output/input_covid2021_matching.csv

#Data management for covid2021_matching for matching with 2017 general population
  clean_covid2021_matching_2017:
    run: stata-mp:latest analysis/covid2021_matching_2017.do
    needs: [extract_covid2021_matching]
    outputs:
      highly_sensitive:
        analysis_dataset: output/covid2021_matching_2017.csv
      moderately_sensitive:
        log: logs/covid2021_matching_2017.log

# Split covid2021_matching_2017 and 2017_matching by STP
  split_stps_covid20212017:
    run: stata-mp:latest analysis/split_stps_covid20212017.do
    needs: [extract_covid2021_matching, clean_covid2021_matching_2017, extract_2017_matching, clean_2017_matching]
    outputs:
      highly_sensitive:
        covid2021_stp5: output/input_covid2021_matching_2017_stp5.csv
        covid2021_stp6: output/input_covid2021_matching_2017_stp6.csv
        covid2021_stp7: output/input_covid2021_matching_2017_stp7.csv
        covid2021_stp8: output/input_covid2021_matching_2017_stp8.csv
        covid2021_stp9: output/input_covid2021_matching_2017_stp9.csv
        covid2021_stp10: output/input_covid2021_matching_2017_stp10.csv
        covid2021_stp12: output/input_covid2021_matching_2017_stp12.csv
        covid2021_stp13: output/input_covid2021_matching_2017_stp13.csv
        covid2021_stp14: output/input_covid2021_matching_2017_stp14.csv
        covid2021_stp15: output/input_covid2021_matching_2017_stp15.csv
        covid2021_stp16: output/input_covid2021_matching_2017_stp16.csv
        covid2021_stp17: output/input_covid2021_matching_2017_stp17.csv
        covid2021_stp20: output/input_covid2021_matching_2017_stp20.csv
        covid2021_stp21: output/input_covid2021_matching_2017_stp21.csv
        covid2021_stp22: output/input_covid2021_matching_2017_stp22.csv
        covid2021_stp23: output/input_covid2021_matching_2017_stp23.csv
        covid2021_stp24: output/input_covid2021_matching_2017_stp24.csv
        covid2021_stp25: output/input_covid2021_matching_2017_stp25.csv
        covid2021_stp26: output/input_covid2021_matching_2017_stp26.csv
        covid2021_stp27: output/input_covid2021_matching_2017_stp27.csv
        covid2021_stp29: output/input_covid2021_matching_2017_stp29.csv
        covid2021_stp33: output/input_covid2021_matching_2017_stp33.csv
        covid2021_stp35: output/input_covid2021_matching_2017_stp35.csv
        covid2021_stp36: output/input_covid2021_matching_2017_stp36.csv
        covid2021_stp37: output/input_covid2021_matching_2017_stp37.csv
        covid2021_stp40: output/input_covid2021_matching_2017_stp40.csv
        covid2021_stp41: output/input_covid2021_matching_2017_stp41.csv
        covid2021_stp42: output/input_covid2021_matching_2017_stp42.csv
        covid2021_stp43: output/input_covid2021_matching_2017_stp43.csv
        covid2021_stp44: output/input_covid2021_matching_2017_stp44.csv
        covid2021_stp49: output/input_covid2021_matching_2017_stp49.csv
        2017covid2021_stp5: output/input_2017covid2021_matching_stp5.csv
        2017covid2021_stp6: output/input_2017covid2021_matching_stp6.csv
        2017covid2021_stp7: output/input_2017covid2021_matching_stp7.csv
        2017covid2021_stp8: output/input_2017covid2021_matching_stp8.csv
        2017covid2021_stp9: output/input_2017covid2021_matching_stp9.csv
        2017covid2021_stp10: output/input_2017covid2021_matching_stp10.csv
        2017covid2021_stp12: output/input_2017covid2021_matching_stp12.csv
        2017covid2021_stp13: output/input_2017covid2021_matching_stp13.csv
        2017covid2021_stp14: output/input_2017covid2021_matching_stp14.csv
        2017covid2021_stp15: output/input_2017covid2021_matching_stp15.csv
        2017covid2021_stp16: output/input_2017covid2021_matching_stp16.csv
        2017covid2021_stp17: output/input_2017covid2021_matching_stp17.csv
        2017covid2021_stp20: output/input_2017covid2021_matching_stp20.csv
        2017covid2021_stp21: output/input_2017covid2021_matching_stp21.csv
        2017covid2021_stp22: output/input_2017covid2021_matching_stp22.csv
        2017covid2021_stp23: output/input_2017covid2021_matching_stp23.csv
        2017covid2021_stp24: output/input_2017covid2021_matching_stp24.csv
        2017covid2021_stp25: output/input_2017covid2021_matching_stp25.csv
        2017covid2021_stp26: output/input_2017covid2021_matching_stp26.csv
        2017covid2021_stp27: output/input_2017covid2021_matching_stp27.csv
        2017covid2021_stp29: output/input_2017covid2021_matching_stp29.csv
        2017covid2021_stp33: output/input_2017covid2021_matching_stp33.csv
        2017covid2021_stp35: output/input_2017covid2021_matching_stp35.csv
        2017covid2021_stp36: output/input_2017covid2021_matching_stp36.csv
        2017covid2021_stp37: output/input_2017covid2021_matching_stp37.csv
        2017covid2021_stp40: output/input_2017covid2021_matching_stp40.csv
        2017covid2021_stp41: output/input_2017covid2021_matching_stp41.csv
        2017covid2021_stp42: output/input_2017covid2021_matching_stp42.csv
        2017covid2021_stp43: output/input_2017covid2021_matching_stp43.csv
        2017covid2021_stp44: output/input_2017covid2021_matching_stp44.csv
        2017covid2021_stp49: output/input_2017covid2021_matching_stp49.csv
      moderately_sensitive:
        log: logs/split_stps_covid20212017.log

  match_2017B_stp10:
    run: python:latest python analysis/match_covid20212017_stp10.py
    needs: [extract_covid2021_matching, clean_covid2021_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_covid20212017]
    outputs:
      moderately_sensitive:
        matching_report_stp10: output/matching_report_2017B_stp10.txt
      highly_sensitive:
        matched_matches_stp10: output/matched_matches_2017B_stp10.csv
        matched_cases_stp10: output/matched_cases_2017B_stp10.csv
        matched_all_stp10: output/matched_combined_2017B_stp10.csv

  match_2017B_stp12:
    run: python:latest python analysis/match_covid20212017_stp12.py
    needs: [extract_covid2021_matching, clean_covid2021_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_covid20212017]
    outputs:
      moderately_sensitive:
        matching_report_stp12: output/matching_report_2017B_stp12.txt
      highly_sensitive:
        matched_matches_stp12: output/matched_matches_2017B_stp12.csv
        matched_cases_stp12: output/matched_cases_2017B_stp12.csv
        matched_all_stp12: output/matched_combined_2017B_stp12.csv

# Extract data required for matching for COVID December 2021 to October 2022 (all STPs)
  extract_covidD_matching:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_covidD_matching
    outputs:
      highly_sensitive:
        cohort: output/input_covidD_matching.csv

#Data management for covidD_matching for matching with 2017 general population
  clean_covidD_matching_2017:
    run: stata-mp:latest analysis/covidD_matching_2017.do
    needs: [extract_covidD_matching]
    outputs:
      highly_sensitive:
        analysis_dataset: output/covidD_matching_2017.csv
      moderately_sensitive:
        log: logs/covidD_matching_2017.log

  match_2017_1stp5:
    run: python:latest python analysis/match_2017_1stp5.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp5: output/matching_report_2017_1stp5.txt
      highly_sensitive:
        matched_matches_1stp5: output/matched_matches_2017_1stp5.csv
        matched_cases_1stp5: output/matched_cases_2017_1stp5.csv
        matched_all_1stp5: output/matched_combined_2017_1stp5.csv

  match_2017_1stp6:
    run: python:latest python analysis/match_2017_1stp6.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp6: output/matching_report_2017_1stp6.txt
      highly_sensitive:
        matched_matches_1stp6: output/matched_matches_2017_1stp6.csv
        matched_cases_1stp6: output/matched_cases_2017_1stp6.csv
        matched_all_1stp6: output/matched_combined_2017_1stp6.csv

  match_2017_1stp7:
    run: python:latest python analysis/match_2017_1stp7.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp7: output/matching_report_2017_1stp7.txt
      highly_sensitive:
        matched_matches_1stp7: output/matched_matches_2017_1stp7.csv
        matched_cases_1stp7: output/matched_cases_2017_1stp7.csv
        matched_all_1stp7: output/matched_combined_2017_1stp7.csv

  match_2017_1stp8:
    run: python:latest python analysis/match_2017_1stp8.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp8: output/matching_report_2017_1stp8.txt
      highly_sensitive:
        matched_matches_1stp8: output/matched_matches_2017_1stp8.csv
        matched_cases_1stp8: output/matched_cases_2017_1stp8.csv
        matched_all_1stp8: output/matched_combined_2017_1stp8.csv

  match_2017_1stp9:
    run: python:latest python analysis/match_2017_1stp9.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp9: output/matching_report_2017_1stp9.txt
      highly_sensitive:
        matched_matches_1stp9: output/matched_matches_2017_1stp9.csv
        matched_cases_1stp9: output/matched_cases_2017_1stp9.csv
        matched_all_1stp9: output/matched_combined_2017_1stp9.csv

  match_2017_1stp10:
    run: python:latest python analysis/match_2017_1stp10.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp10: output/matching_report_2017_1stp10.txt
      highly_sensitive:
        matched_matches_1stp10: output/matched_matches_2017_1stp10.csv
        matched_cases_1stp10: output/matched_cases_2017_1stp10.csv
        matched_all_1stp10: output/matched_combined_2017_1stp10.csv

  match_2017_1stp12:
    run: python:latest python analysis/match_2017_1stp12.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp12: output/matching_report_2017_1stp12.txt
      highly_sensitive:
        matched_matches_1stp12: output/matched_matches_2017_1stp12.csv
        matched_cases_1stp12: output/matched_cases_2017_1stp12.csv
        matched_all_1stp12: output/matched_combined_2017_1stp12.csv

  match_2017_1stp13:
    run: python:latest python analysis/match_2017_1stp13.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp13: output/matching_report_2017_1stp13.txt
      highly_sensitive:
        matched_matches_1stp13: output/matched_matches_2017_1stp13.csv
        matched_cases_1stp13: output/matched_cases_2017_1stp13.csv
        matched_all_1stp13: output/matched_combined_2017_1stp13.csv

  match_2017_1stp14:
    run: python:latest python analysis/match_2017_1stp14.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp14: output/matching_report_2017_1stp14.txt
      highly_sensitive:
        matched_matches_1stp14: output/matched_matches_2017_1stp14.csv
        matched_cases_1stp14: output/matched_cases_2017_1stp14.csv
        matched_all_1stp14: output/matched_combined_2017_1stp14.csv

  match_2017_1stp15:
    run: python:latest python analysis/match_2017_1stp15.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp15: output/matching_report_2017_1stp15.txt
      highly_sensitive:
        matched_matches_1stp15: output/matched_matches_2017_1stp15.csv
        matched_cases_1stp15: output/matched_cases_2017_1stp15.csv
        matched_all_1stp15: output/matched_combined_2017_1stp15.csv

  match_2017_1stp16:
    run: python:latest python analysis/match_2017_1stp16.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp16: output/matching_report_2017_1stp16.txt
      highly_sensitive:
        matched_matches_1stp16: output/matched_matches_2017_1stp16.csv
        matched_cases_1stp16: output/matched_cases_2017_1stp16.csv
        matched_all_1stp16: output/matched_combined_2017_1stp16.csv

  match_2017_1stp17:
    run: python:latest python analysis/match_2017_1stp17.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp17: output/matching_report_2017_1stp17.txt
      highly_sensitive:
        matched_matches_1stp17: output/matched_matches_2017_1stp17.csv
        matched_cases_1stp17: output/matched_cases_2017_1stp17.csv
        matched_all_1stp17: output/matched_combined_2017_1stp17.csv

  match_2017_1stp20:
    run: python:latest python analysis/match_2017_1stp20.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp20: output/matching_report_2017_1stp20.txt
      highly_sensitive:
        matched_matches_1stp20: output/matched_matches_2017_1stp20.csv
        matched_cases_1stp20: output/matched_cases_2017_1stp20.csv
        matched_all_1stp20: output/matched_combined_2017_1stp20.csv

  match_2017_1stp21:
    run: python:latest python analysis/match_2017_1stp21.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp21: output/matching_report_2017_1stp21.txt
      highly_sensitive:
        matched_matches_1stp21: output/matched_matches_2017_1stp21.csv
        matched_cases_1stp21: output/matched_cases_2017_1stp21.csv
        matched_all_1stp21: output/matched_combined_2017_1stp21.csv

  match_2017_1stp22:
    run: python:latest python analysis/match_2017_1stp22.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp22: output/matching_report_2017_1stp22.txt
      highly_sensitive:
        matched_matches_1stp22: output/matched_matches_2017_1stp22.csv
        matched_cases_1stp22: output/matched_cases_2017_1stp22.csv
        matched_all_1stp22: output/matched_combined_2017_1stp22.csv

  match_2017_1stp23:
    run: python:latest python analysis/match_2017_1stp23.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp23: output/matching_report_2017_1stp23.txt
      highly_sensitive:
        matched_matches_1stp23: output/matched_matches_2017_1stp23.csv
        matched_cases_1stp23: output/matched_cases_2017_1stp23.csv
        matched_all_1stp23: output/matched_combined_2017_1stp23.csv

  match_2017_1stp24:
    run: python:latest python analysis/match_2017_1stp24.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp24: output/matching_report_2017_1stp24.txt
      highly_sensitive:
        matched_matches_1stp24: output/matched_matches_2017_1stp24.csv
        matched_cases_1stp24: output/matched_cases_2017_1stp24.csv
        matched_all_1stp24: output/matched_combined_2017_1stp24.csv

  match_2017_1stp25:
    run: python:latest python analysis/match_2017_1stp25.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp25: output/matching_report_2017_1stp25.txt
      highly_sensitive:
        matched_matches_1stp25: output/matched_matches_2017_1stp25.csv
        matched_cases_1stp25: output/matched_cases_2017_1stp25.csv
        matched_all_1stp25: output/matched_combined_2017_1stp25.csv

  match_2017_1stp26:
    run: python:latest python analysis/match_2017_1stp26.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp26: output/matching_report_2017_1stp26.txt
      highly_sensitive:
        matched_matches_1stp26: output/matched_matches_2017_1stp26.csv
        matched_cases_1stp26: output/matched_cases_2017_1stp26.csv
        matched_all_1stp26: output/matched_combined_2017_1stp26.csv

  match_2017_1stp27:
    run: python:latest python analysis/match_2017_1stp27.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp27: output/matching_report_2017_1stp27.txt
      highly_sensitive:
        matched_matches_1stp27: output/matched_matches_2017_1stp27.csv
        matched_cases_1stp27: output/matched_cases_2017_1stp27.csv
        matched_all_1stp27: output/matched_combined_2017_1stp27.csv

  match_2017_1stp29:
    run: python:latest python analysis/match_2017_1stp29.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp29: output/matching_report_2017_1stp29.txt
      highly_sensitive:
        matched_matches_1stp29: output/matched_matches_2017_1stp29.csv
        matched_cases_1stp29: output/matched_cases_2017_1stp29.csv
        matched_all_1stp29: output/matched_combined_2017_1stp29.csv

  match_2017_1stp33:
    run: python:latest python analysis/match_2017_1stp33.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp33: output/matching_report_2017_1stp33.txt
      highly_sensitive:
        matched_matches_1stp33: output/matched_matches_2017_1stp33.csv
        matched_cases_1stp33: output/matched_cases_2017_1stp33.csv
        matched_all_1stp33: output/matched_combined_2017_1stp33.csv

  match_2017_1stp35:
    run: python:latest python analysis/match_2017_1stp35.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp35: output/matching_report_2017_1stp35.txt
      highly_sensitive:
        matched_matches_1stp35: output/matched_matches_2017_1stp35.csv
        matched_cases_1stp35: output/matched_cases_2017_1stp35.csv
        matched_all_1stp35: output/matched_combined_2017_1stp35.csv

  match_2017_1stp36:
    run: python:latest python analysis/match_2017_1stp36.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp36: output/matching_report_2017_1stp36.txt
      highly_sensitive:
        matched_matches_1stp36: output/matched_matches_2017_1stp36.csv
        matched_cases_1stp36: output/matched_cases_2017_1stp36.csv
        matched_all_1stp36: output/matched_combined_2017_1stp36.csv

  match_2017_1stp37:
    run: python:latest python analysis/match_2017_1stp37.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp37: output/matching_report_2017_1stp37.txt
      highly_sensitive:
        matched_matches_1stp37: output/matched_matches_2017_1stp37.csv
        matched_cases_1stp37: output/matched_cases_2017_1stp37.csv
        matched_all_1stp37: output/matched_combined_2017_1stp37.csv

  match_2017_1stp40:
    run: python:latest python analysis/match_2017_1stp40.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp40: output/matching_report_2017_1stp40.txt
      highly_sensitive:
        matched_matches_1stp40: output/matched_matches_2017_1stp40.csv
        matched_cases_1stp40: output/matched_cases_2017_1stp40.csv
        matched_all_1stp40: output/matched_combined_2017_1stp40.csv

  match_2017_1stp41:
    run: python:latest python analysis/match_2017_1stp41.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp41: output/matching_report_2017_1stp41.txt
      highly_sensitive:
        matched_matches_1stp41: output/matched_matches_2017_1stp41.csv
        matched_cases_1stp41: output/matched_cases_2017_1stp41.csv
        matched_all_1stp41: output/matched_combined_2017_1stp41.csv

  match_2017_1stp42:
    run: python:latest python analysis/match_2017_1stp42.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp42: output/matching_report_2017_1stp42.txt
      highly_sensitive:
        matched_matches_1stp42: output/matched_matches_2017_1stp42.csv
        matched_cases_1stp42: output/matched_cases_2017_1stp42.csv
        matched_all_1stp42: output/matched_combined_2017_1stp42.csv

  match_2017_1stp43:
    run: python:latest python analysis/match_2017_1stp43.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp43: output/matching_report_2017_1stp43.txt
      highly_sensitive:
        matched_matches_1stp43: output/matched_matches_2017_1stp43.csv
        matched_cases_1stp43: output/matched_cases_2017_1stp43.csv
        matched_all_1stp43: output/matched_combined_2017_1stp43.csv

  match_2017_1stp44:
    run: python:latest python analysis/match_2017_1stp44.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp44: output/matching_report_2017_1stp44.txt
      highly_sensitive:
        matched_matches_1stp44: output/matched_matches_2017_1stp44.csv
        matched_cases_1stp44: output/matched_cases_2017_1stp44.csv
        matched_all_1stp44: output/matched_combined_2017_1stp44.csv

  match_2017_1stp49:
    run: python:latest python analysis/match_2017_1stp49.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_1stp49: output/matching_report_2017_1stp49.txt
      highly_sensitive:
        matched_matches_1stp49: output/matched_matches_2017_1stp49.csv
        matched_cases_1stp49: output/matched_cases_2017_1stp49.csv
        matched_all_1stp49: output/matched_combined_2017_1stp49.csv

  match_2017_2stp5:
    run: python:latest python analysis/match_2017_2stp5.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp5: output/matching_report_2017_2stp5.txt
      highly_sensitive:
        matched_matches_2stp5: output/matched_matches_2017_2stp5.csv
        matched_cases_2stp5: output/matched_cases_2017_2stp5.csv
        matched_all_2stp5: output/matched_combined_2017_2stp5.csv

  match_2017_2stp6:
    run: python:latest python analysis/match_2017_2stp6.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp6: output/matching_report_2017_2stp6.txt
      highly_sensitive:
        matched_matches_2stp6: output/matched_matches_2017_2stp6.csv
        matched_cases_2stp6: output/matched_cases_2017_2stp6.csv
        matched_all_2stp6: output/matched_combined_2017_2stp6.csv

  match_2017_2stp7:
    run: python:latest python analysis/match_2017_2stp7.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp7: output/matching_report_2017_2stp7.txt
      highly_sensitive:
        matched_matches_2stp7: output/matched_matches_2017_2stp7.csv
        matched_cases_2stp7: output/matched_cases_2017_2stp7.csv
        matched_all_2stp7: output/matched_combined_2017_2stp7.csv

  match_2017_2stp8:
    run: python:latest python analysis/match_2017_2stp8.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp8: output/matching_report_2017_2stp8.txt
      highly_sensitive:
        matched_matches_2stp8: output/matched_matches_2017_2stp8.csv
        matched_cases_2stp8: output/matched_cases_2017_2stp8.csv
        matched_all_2stp8: output/matched_combined_2017_2stp8.csv

  match_2017_2stp9:
    run: python:latest python analysis/match_2017_2stp9.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp9: output/matching_report_2017_2stp9.txt
      highly_sensitive:
        matched_matches_2stp9: output/matched_matches_2017_2stp9.csv
        matched_cases_2stp9: output/matched_cases_2017_2stp9.csv
        matched_all_2stp9: output/matched_combined_2017_2stp9.csv

  match_2017_2stp10:
    run: python:latest python analysis/match_2017_2stp10.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp10: output/matching_report_2017_2stp10.txt
      highly_sensitive:
        matched_matches_2stp10: output/matched_matches_2017_2stp10.csv
        matched_cases_2stp10: output/matched_cases_2017_2stp10.csv
        matched_all_2stp10: output/matched_combined_2017_2stp10.csv

  match_2017_2stp12:
    run: python:latest python analysis/match_2017_2stp12.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp12: output/matching_report_2017_2stp12.txt
      highly_sensitive:
        matched_matches_2stp12: output/matched_matches_2017_2stp12.csv
        matched_cases_2stp12: output/matched_cases_2017_2stp12.csv
        matched_all_2stp12: output/matched_combined_2017_2stp12.csv

  match_2017_2stp13:
    run: python:latest python analysis/match_2017_2stp13.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp13: output/matching_report_2017_2stp13.txt
      highly_sensitive:
        matched_matches_2stp13: output/matched_matches_2017_2stp13.csv
        matched_cases_2stp13: output/matched_cases_2017_2stp13.csv
        matched_all_2stp13: output/matched_combined_2017_2stp13.csv

  match_2017_2stp14:
    run: python:latest python analysis/match_2017_2stp14.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp14: output/matching_report_2017_2stp14.txt
      highly_sensitive:
        matched_matches_2stp14: output/matched_matches_2017_2stp14.csv
        matched_cases_2stp14: output/matched_cases_2017_2stp14.csv
        matched_all_2stp14: output/matched_combined_2017_2stp14.csv

  match_2017_2stp15:
    run: python:latest python analysis/match_2017_2stp15.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp15: output/matching_report_2017_2stp15.txt
      highly_sensitive:
        matched_matches_2stp15: output/matched_matches_2017_2stp15.csv
        matched_cases_2stp15: output/matched_cases_2017_2stp15.csv
        matched_all_2stp15: output/matched_combined_2017_2stp15.csv

  match_2017_2stp16:
    run: python:latest python analysis/match_2017_2stp16.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp16: output/matching_report_2017_2stp16.txt
      highly_sensitive:
        matched_matches_2stp16: output/matched_matches_2017_2stp16.csv
        matched_cases_2stp16: output/matched_cases_2017_2stp16.csv
        matched_all_2stp16: output/matched_combined_2017_2stp16.csv

  match_2017_2stp17:
    run: python:latest python analysis/match_2017_2stp17.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp17: output/matching_report_2017_2stp17.txt
      highly_sensitive:
        matched_matches_2stp17: output/matched_matches_2017_2stp17.csv
        matched_cases_2stp17: output/matched_cases_2017_2stp17.csv
        matched_all_2stp17: output/matched_combined_2017_2stp17.csv

  match_2017_2stp20:
    run: python:latest python analysis/match_2017_2stp20.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp20: output/matching_report_2017_2stp20.txt
      highly_sensitive:
        matched_matches_2stp20: output/matched_matches_2017_2stp20.csv
        matched_cases_2stp20: output/matched_cases_2017_2stp20.csv
        matched_all_2stp20: output/matched_combined_2017_2stp20.csv

  match_2017_2stp21:
    run: python:latest python analysis/match_2017_2stp21.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp21: output/matching_report_2017_2stp21.txt
      highly_sensitive:
        matched_matches_2stp21: output/matched_matches_2017_2stp21.csv
        matched_cases_2stp21: output/matched_cases_2017_2stp21.csv
        matched_all_2stp21: output/matched_combined_2017_2stp21.csv

  match_2017_2stp22:
    run: python:latest python analysis/match_2017_2stp22.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp22: output/matching_report_2017_2stp22.txt
      highly_sensitive:
        matched_matches_2stp22: output/matched_matches_2017_2stp22.csv
        matched_cases_2stp22: output/matched_cases_2017_2stp22.csv
        matched_all_2stp22: output/matched_combined_2017_2stp22.csv

  match_2017_2stp23:
    run: python:latest python analysis/match_2017_2stp23.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp23: output/matching_report_2017_2stp23.txt
      highly_sensitive:
        matched_matches_2stp23: output/matched_matches_2017_2stp23.csv
        matched_cases_2stp23: output/matched_cases_2017_2stp23.csv
        matched_all_2stp23: output/matched_combined_2017_2stp23.csv

  match_2017_2stp24:
    run: python:latest python analysis/match_2017_2stp24.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp24: output/matching_report_2017_2stp24.txt
      highly_sensitive:
        matched_matches_2stp24: output/matched_matches_2017_2stp24.csv
        matched_cases_2stp24: output/matched_cases_2017_2stp24.csv
        matched_all_2stp24: output/matched_combined_2017_2stp24.csv

  match_2017_2stp25:
    run: python:latest python analysis/match_2017_2stp25.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp25: output/matching_report_2017_2stp25.txt
      highly_sensitive:
        matched_matches_2stp25: output/matched_matches_2017_2stp25.csv
        matched_cases_2stp25: output/matched_cases_2017_2stp25.csv
        matched_all_2stp25: output/matched_combined_2017_2stp25.csv

  match_2017_2stp26:
    run: python:latest python analysis/match_2017_2stp26.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp26: output/matching_report_2017_2stp26.txt
      highly_sensitive:
        matched_matches_2stp26: output/matched_matches_2017_2stp26.csv
        matched_cases_2stp26: output/matched_cases_2017_2stp26.csv
        matched_all_2stp26: output/matched_combined_2017_2stp26.csv

  match_2017_2stp27:
    run: python:latest python analysis/match_2017_2stp27.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp27: output/matching_report_2017_2stp27.txt
      highly_sensitive:
        matched_matches_2stp27: output/matched_matches_2017_2stp27.csv
        matched_cases_2stp27: output/matched_cases_2017_2stp27.csv
        matched_all_2stp27: output/matched_combined_2017_2stp27.csv

  match_2017_2stp29:
    run: python:latest python analysis/match_2017_2stp29.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp29: output/matching_report_2017_2stp29.txt
      highly_sensitive:
        matched_matches_2stp29: output/matched_matches_2017_2stp29.csv
        matched_cases_2stp29: output/matched_cases_2017_2stp29.csv
        matched_all_2stp29: output/matched_combined_2017_2stp29.csv

  match_2017_2stp33:
    run: python:latest python analysis/match_2017_2stp33.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp33: output/matching_report_2017_2stp33.txt
      highly_sensitive:
        matched_matches_2stp33: output/matched_matches_2017_2stp33.csv
        matched_cases_2stp33: output/matched_cases_2017_2stp33.csv
        matched_all_2stp33: output/matched_combined_2017_2stp33.csv

  match_2017_2stp35:
    run: python:latest python analysis/match_2017_2stp35.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp35: output/matching_report_2017_2stp35.txt
      highly_sensitive:
        matched_matches_2stp35: output/matched_matches_2017_2stp35.csv
        matched_cases_2stp35: output/matched_cases_2017_2stp35.csv
        matched_all_2stp35: output/matched_combined_2017_2stp35.csv

  match_2017_2stp36:
    run: python:latest python analysis/match_2017_2stp36.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp36: output/matching_report_2017_2stp36.txt
      highly_sensitive:
        matched_matches_2stp36: output/matched_matches_2017_2stp36.csv
        matched_cases_2stp36: output/matched_cases_2017_2stp36.csv
        matched_all_2stp36: output/matched_combined_2017_2stp36.csv

  match_2017_2stp37:
    run: python:latest python analysis/match_2017_2stp37.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp37: output/matching_report_2017_2stp37.txt
      highly_sensitive:
        matched_matches_2stp37: output/matched_matches_2017_2stp37.csv
        matched_cases_2stp37: output/matched_cases_2017_2stp37.csv
        matched_all_2stp37: output/matched_combined_2017_2stp37.csv

  match_2017_2stp40:
    run: python:latest python analysis/match_2017_2stp40.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp40: output/matching_report_2017_2stp40.txt
      highly_sensitive:
        matched_matches_2stp40: output/matched_matches_2017_2stp40.csv
        matched_cases_2stp40: output/matched_cases_2017_2stp40.csv
        matched_all_2stp40: output/matched_combined_2017_2stp40.csv

  match_2017_2stp41:
    run: python:latest python analysis/match_2017_2stp41.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp41: output/matching_report_2017_2stp41.txt
      highly_sensitive:
        matched_matches_2stp41: output/matched_matches_2017_2stp41.csv
        matched_cases_2stp41: output/matched_cases_2017_2stp41.csv
        matched_all_2stp41: output/matched_combined_2017_2stp41.csv

  match_2017_2stp42:
    run: python:latest python analysis/match_2017_2stp42.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp42: output/matching_report_2017_2stp42.txt
      highly_sensitive:
        matched_matches_2stp42: output/matched_matches_2017_2stp42.csv
        matched_cases_2stp42: output/matched_cases_2017_2stp42.csv
        matched_all_2stp42: output/matched_combined_2017_2stp42.csv

  match_2017_2stp43:
    run: python:latest python analysis/match_2017_2stp43.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp43: output/matching_report_2017_2stp43.txt
      highly_sensitive:
        matched_matches_2stp43: output/matched_matches_2017_2stp43.csv
        matched_cases_2stp43: output/matched_cases_2017_2stp43.csv
        matched_all_2stp43: output/matched_combined_2017_2stp43.csv

  match_2017_2stp44:
    run: python:latest python analysis/match_2017_2stp44.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp44: output/matching_report_2017_2stp44.txt
      highly_sensitive:
        matched_matches_2stp44: output/matched_matches_2017_2stp44.csv
        matched_cases_2stp44: output/matched_cases_2017_2stp44.csv
        matched_all_2stp44: output/matched_combined_2017_2stp44.csv

  match_2017_2stp49:
    run: python:latest python analysis/match_2017_2stp49.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_2stp49: output/matching_report_2017_2stp49.txt
      highly_sensitive:
        matched_matches_2stp49: output/matched_matches_2017_2stp49.csv
        matched_cases_2stp49: output/matched_cases_2017_2stp49.csv
        matched_all_2stp49: output/matched_combined_2017_2stp49.csv

  match_2017_3stp5:
    run: python:latest python analysis/match_2017_3stp5.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp5: output/matching_report_2017_3stp5.txt
      highly_sensitive:
        matched_matches_3stp5: output/matched_matches_2017_3stp5.csv
        matched_cases_3stp5: output/matched_cases_2017_3stp5.csv
        matched_all_3stp5: output/matched_combined_2017_3stp5.csv

  match_2017_3stp6:
    run: python:latest python analysis/match_2017_3stp6.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp6: output/matching_report_2017_3stp6.txt
      highly_sensitive:
        matched_matches_3stp6: output/matched_matches_2017_3stp6.csv
        matched_cases_3stp6: output/matched_cases_2017_3stp6.csv
        matched_all_3stp6: output/matched_combined_2017_3stp6.csv

  match_2017_3stp7:
    run: python:latest python analysis/match_2017_3stp7.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp7: output/matching_report_2017_3stp7.txt
      highly_sensitive:
        matched_matches_3stp7: output/matched_matches_2017_3stp7.csv
        matched_cases_3stp7: output/matched_cases_2017_3stp7.csv
        matched_all_3stp7: output/matched_combined_2017_3stp7.csv

  match_2017_3stp8:
    run: python:latest python analysis/match_2017_3stp8.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp8: output/matching_report_2017_3stp8.txt
      highly_sensitive:
        matched_matches_3stp8: output/matched_matches_2017_3stp8.csv
        matched_cases_3stp8: output/matched_cases_2017_3stp8.csv
        matched_all_3stp8: output/matched_combined_2017_3stp8.csv

  match_2017_3stp9:
    run: python:latest python analysis/match_2017_3stp9.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp9: output/matching_report_2017_3stp9.txt
      highly_sensitive:
        matched_matches_3stp9: output/matched_matches_2017_3stp9.csv
        matched_cases_3stp9: output/matched_cases_2017_3stp9.csv
        matched_all_3stp9: output/matched_combined_2017_3stp9.csv

  match_2017_3stp10:
    run: python:latest python analysis/match_2017_3stp10.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp10: output/matching_report_2017_3stp10.txt
      highly_sensitive:
        matched_matches_3stp10: output/matched_matches_2017_3stp10.csv
        matched_cases_3stp10: output/matched_cases_2017_3stp10.csv
        matched_all_3stp10: output/matched_combined_2017_3stp10.csv

  match_2017_3stp12:
    run: python:latest python analysis/match_2017_3stp12.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp12: output/matching_report_2017_3stp12.txt
      highly_sensitive:
        matched_matches_3stp12: output/matched_matches_2017_3stp12.csv
        matched_cases_3stp12: output/matched_cases_2017_3stp12.csv
        matched_all_3stp12: output/matched_combined_2017_3stp12.csv

  match_2017_3stp13:
    run: python:latest python analysis/match_2017_3stp13.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp13: output/matching_report_2017_3stp13.txt
      highly_sensitive:
        matched_matches_3stp13: output/matched_matches_2017_3stp13.csv
        matched_cases_3stp13: output/matched_cases_2017_3stp13.csv
        matched_all_3stp13: output/matched_combined_2017_3stp13.csv

  match_2017_3stp14:
    run: python:latest python analysis/match_2017_3stp14.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp14: output/matching_report_2017_3stp14.txt
      highly_sensitive:
        matched_matches_3stp14: output/matched_matches_2017_3stp14.csv
        matched_cases_3stp14: output/matched_cases_2017_3stp14.csv
        matched_all_3stp14: output/matched_combined_2017_3stp14.csv

  match_2017_3stp15:
    run: python:latest python analysis/match_2017_3stp15.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp15: output/matching_report_2017_3stp15.txt
      highly_sensitive:
        matched_matches_3stp15: output/matched_matches_2017_3stp15.csv
        matched_cases_3stp15: output/matched_cases_2017_3stp15.csv
        matched_all_3stp15: output/matched_combined_2017_3stp15.csv

  match_2017_3stp16:
    run: python:latest python analysis/match_2017_3stp16.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp16: output/matching_report_2017_3stp16.txt
      highly_sensitive:
        matched_matches_3stp16: output/matched_matches_2017_3stp16.csv
        matched_cases_3stp16: output/matched_cases_2017_3stp16.csv
        matched_all_3stp16: output/matched_combined_2017_3stp16.csv

  match_2017_3stp17:
    run: python:latest python analysis/match_2017_3stp17.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp17: output/matching_report_2017_3stp17.txt
      highly_sensitive:
        matched_matches_3stp17: output/matched_matches_2017_3stp17.csv
        matched_cases_3stp17: output/matched_cases_2017_3stp17.csv
        matched_all_3stp17: output/matched_combined_2017_3stp17.csv

  match_2017_3stp20:
    run: python:latest python analysis/match_2017_3stp20.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp20: output/matching_report_2017_3stp20.txt
      highly_sensitive:
        matched_matches_3stp20: output/matched_matches_2017_3stp20.csv
        matched_cases_3stp20: output/matched_cases_2017_3stp20.csv
        matched_all_3stp20: output/matched_combined_2017_3stp20.csv

  match_2017_3stp21:
    run: python:latest python analysis/match_2017_3stp21.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp21: output/matching_report_2017_3stp21.txt
      highly_sensitive:
        matched_matches_3stp21: output/matched_matches_2017_3stp21.csv
        matched_cases_3stp21: output/matched_cases_2017_3stp21.csv
        matched_all_3stp21: output/matched_combined_2017_3stp21.csv

  match_2017_3stp22:
    run: python:latest python analysis/match_2017_3stp22.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp22: output/matching_report_2017_3stp22.txt
      highly_sensitive:
        matched_matches_3stp22: output/matched_matches_2017_3stp22.csv
        matched_cases_3stp22: output/matched_cases_2017_3stp22.csv
        matched_all_3stp22: output/matched_combined_2017_3stp22.csv

  match_2017_3stp23:
    run: python:latest python analysis/match_2017_3stp23.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp23: output/matching_report_2017_3stp23.txt
      highly_sensitive:
        matched_matches_3stp23: output/matched_matches_2017_3stp23.csv
        matched_cases_3stp23: output/matched_cases_2017_3stp23.csv
        matched_all_3stp23: output/matched_combined_2017_3stp23.csv

  match_2017_3stp24:
    run: python:latest python analysis/match_2017_3stp24.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp24: output/matching_report_2017_3stp24.txt
      highly_sensitive:
        matched_matches_3stp24: output/matched_matches_2017_3stp24.csv
        matched_cases_3stp24: output/matched_cases_2017_3stp24.csv
        matched_all_3stp24: output/matched_combined_2017_3stp24.csv

  match_2017_3stp25:
    run: python:latest python analysis/match_2017_3stp25.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp25: output/matching_report_2017_3stp25.txt
      highly_sensitive:
        matched_matches_3stp25: output/matched_matches_2017_3stp25.csv
        matched_cases_3stp25: output/matched_cases_2017_3stp25.csv
        matched_all_3stp25: output/matched_combined_2017_3stp25.csv

  match_2017_3stp26:
    run: python:latest python analysis/match_2017_3stp26.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp26: output/matching_report_2017_3stp26.txt
      highly_sensitive:
        matched_matches_3stp26: output/matched_matches_2017_3stp26.csv
        matched_cases_3stp26: output/matched_cases_2017_3stp26.csv
        matched_all_3stp26: output/matched_combined_2017_3stp26.csv

  match_2017_3stp27:
    run: python:latest python analysis/match_2017_3stp27.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp27: output/matching_report_2017_3stp27.txt
      highly_sensitive:
        matched_matches_3stp27: output/matched_matches_2017_3stp27.csv
        matched_cases_3stp27: output/matched_cases_2017_3stp27.csv
        matched_all_3stp27: output/matched_combined_2017_3stp27.csv

  match_2017_3stp29:
    run: python:latest python analysis/match_2017_3stp29.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp29: output/matching_report_2017_3stp29.txt
      highly_sensitive:
        matched_matches_3stp29: output/matched_matches_2017_3stp29.csv
        matched_cases_3stp29: output/matched_cases_2017_3stp29.csv
        matched_all_3stp29: output/matched_combined_2017_3stp29.csv

  match_2017_3stp33:
    run: python:latest python analysis/match_2017_3stp33.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp33: output/matching_report_2017_3stp33.txt
      highly_sensitive:
        matched_matches_3stp33: output/matched_matches_2017_3stp33.csv
        matched_cases_3stp33: output/matched_cases_2017_3stp33.csv
        matched_all_3stp33: output/matched_combined_2017_3stp33.csv

  match_2017_3stp35:
    run: python:latest python analysis/match_2017_3stp35.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp35: output/matching_report_2017_3stp35.txt
      highly_sensitive:
        matched_matches_3stp35: output/matched_matches_2017_3stp35.csv
        matched_cases_3stp35: output/matched_cases_2017_3stp35.csv
        matched_all_3stp35: output/matched_combined_2017_3stp35.csv

  match_2017_3stp36:
    run: python:latest python analysis/match_2017_3stp36.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp36: output/matching_report_2017_3stp36.txt
      highly_sensitive:
        matched_matches_3stp36: output/matched_matches_2017_3stp36.csv
        matched_cases_3stp36: output/matched_cases_2017_3stp36.csv
        matched_all_3stp36: output/matched_combined_2017_3stp36.csv

  match_2017_3stp37:
    run: python:latest python analysis/match_2017_3stp37.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp37: output/matching_report_2017_3stp37.txt
      highly_sensitive:
        matched_matches_3stp37: output/matched_matches_2017_3stp37.csv
        matched_cases_3stp37: output/matched_cases_2017_3stp37.csv
        matched_all_3stp37: output/matched_combined_2017_3stp37.csv

  match_2017_3stp40:
    run: python:latest python analysis/match_2017_3stp40.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp40: output/matching_report_2017_3stp40.txt
      highly_sensitive:
        matched_matches_3stp40: output/matched_matches_2017_3stp40.csv
        matched_cases_3stp40: output/matched_cases_2017_3stp40.csv
        matched_all_3stp40: output/matched_combined_2017_3stp40.csv

  match_2017_3stp41:
    run: python:latest python analysis/match_2017_3stp41.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp41: output/matching_report_2017_3stp41.txt
      highly_sensitive:
        matched_matches_3stp41: output/matched_matches_2017_3stp41.csv
        matched_cases_3stp41: output/matched_cases_2017_3stp41.csv
        matched_all_3stp41: output/matched_combined_2017_3stp41.csv

  match_2017_3stp42:
    run: python:latest python analysis/match_2017_3stp42.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp42: output/matching_report_2017_3stp42.txt
      highly_sensitive:
        matched_matches_3stp42: output/matched_matches_2017_3stp42.csv
        matched_cases_3stp42: output/matched_cases_2017_3stp42.csv
        matched_all_3stp42: output/matched_combined_2017_3stp42.csv

  match_2017_3stp43:
    run: python:latest python analysis/match_2017_3stp43.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp43: output/matching_report_2017_3stp43.txt
      highly_sensitive:
        matched_matches_3stp43: output/matched_matches_2017_3stp43.csv
        matched_cases_3stp43: output/matched_cases_2017_3stp43.csv
        matched_all_3stp43: output/matched_combined_2017_3stp43.csv

  match_2017_3stp44:
    run: python:latest python analysis/match_2017_3stp44.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp44: output/matching_report_2017_3stp44.txt
      highly_sensitive:
        matched_matches_3stp44: output/matched_matches_2017_3stp44.csv
        matched_cases_3stp44: output/matched_cases_2017_3stp44.csv
        matched_all_3stp44: output/matched_combined_2017_3stp44.csv

  match_2017_3stp49:
    run: python:latest python analysis/match_2017_3stp49.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_3stp49: output/matching_report_2017_3stp49.txt
      highly_sensitive:
        matched_matches_3stp49: output/matched_matches_2017_3stp49.csv
        matched_cases_3stp49: output/matched_cases_2017_3stp49.csv
        matched_all_3stp49: output/matched_combined_2017_3stp49.csv

  match_2017_4stp5:
    run: python:latest python analysis/match_2017_4stp5.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp5: output/matching_report_2017_4stp5.txt
      highly_sensitive:
        matched_matches_4stp5: output/matched_matches_2017_4stp5.csv
        matched_cases_4stp5: output/matched_cases_2017_4stp5.csv
        matched_all_4stp5: output/matched_combined_2017_4stp5.csv

  match_2017_4stp6:
    run: python:latest python analysis/match_2017_4stp6.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp6: output/matching_report_2017_4stp6.txt
      highly_sensitive:
        matched_matches_4stp6: output/matched_matches_2017_4stp6.csv
        matched_cases_4stp6: output/matched_cases_2017_4stp6.csv
        matched_all_4stp6: output/matched_combined_2017_4stp6.csv

  match_2017_4stp7:
    run: python:latest python analysis/match_2017_4stp7.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp7: output/matching_report_2017_4stp7.txt
      highly_sensitive:
        matched_matches_4stp7: output/matched_matches_2017_4stp7.csv
        matched_cases_4stp7: output/matched_cases_2017_4stp7.csv
        matched_all_4stp7: output/matched_combined_2017_4stp7.csv

  match_2017_4stp8:
    run: python:latest python analysis/match_2017_4stp8.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp8: output/matching_report_2017_4stp8.txt
      highly_sensitive:
        matched_matches_4stp8: output/matched_matches_2017_4stp8.csv
        matched_cases_4stp8: output/matched_cases_2017_4stp8.csv
        matched_all_4stp8: output/matched_combined_2017_4stp8.csv

  match_2017_4stp9:
    run: python:latest python analysis/match_2017_4stp9.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp9: output/matching_report_2017_4stp9.txt
      highly_sensitive:
        matched_matches_4stp9: output/matched_matches_2017_4stp9.csv
        matched_cases_4stp9: output/matched_cases_2017_4stp9.csv
        matched_all_4stp9: output/matched_combined_2017_4stp9.csv

  match_2017_4stp10:
    run: python:latest python analysis/match_2017_4stp10.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp10: output/matching_report_2017_4stp10.txt
      highly_sensitive:
        matched_matches_4stp10: output/matched_matches_2017_4stp10.csv
        matched_cases_4stp10: output/matched_cases_2017_4stp10.csv
        matched_all_4stp10: output/matched_combined_2017_4stp10.csv

  match_2017_4stp12:
    run: python:latest python analysis/match_2017_4stp12.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp12: output/matching_report_2017_4stp12.txt
      highly_sensitive:
        matched_matches_4stp12: output/matched_matches_2017_4stp12.csv
        matched_cases_4stp12: output/matched_cases_2017_4stp12.csv
        matched_all_4stp12: output/matched_combined_2017_4stp12.csv

  match_2017_4stp13:
    run: python:latest python analysis/match_2017_4stp13.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp13: output/matching_report_2017_4stp13.txt
      highly_sensitive:
        matched_matches_4stp13: output/matched_matches_2017_4stp13.csv
        matched_cases_4stp13: output/matched_cases_2017_4stp13.csv
        matched_all_4stp13: output/matched_combined_2017_4stp13.csv

  match_2017_4stp14:
    run: python:latest python analysis/match_2017_4stp14.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp14: output/matching_report_2017_4stp14.txt
      highly_sensitive:
        matched_matches_4stp14: output/matched_matches_2017_4stp14.csv
        matched_cases_4stp14: output/matched_cases_2017_4stp14.csv
        matched_all_4stp14: output/matched_combined_2017_4stp14.csv

  match_2017_4stp15:
    run: python:latest python analysis/match_2017_4stp15.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp15: output/matching_report_2017_4stp15.txt
      highly_sensitive:
        matched_matches_4stp15: output/matched_matches_2017_4stp15.csv
        matched_cases_4stp15: output/matched_cases_2017_4stp15.csv
        matched_all_4stp15: output/matched_combined_2017_4stp15.csv

  match_2017_4stp16:
    run: python:latest python analysis/match_2017_4stp16.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp16: output/matching_report_2017_4stp16.txt
      highly_sensitive:
        matched_matches_4stp16: output/matched_matches_2017_4stp16.csv
        matched_cases_4stp16: output/matched_cases_2017_4stp16.csv
        matched_all_4stp16: output/matched_combined_2017_4stp16.csv

  match_2017_4stp17:
    run: python:latest python analysis/match_2017_4stp17.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp17: output/matching_report_2017_4stp17.txt
      highly_sensitive:
        matched_matches_4stp17: output/matched_matches_2017_4stp17.csv
        matched_cases_4stp17: output/matched_cases_2017_4stp17.csv
        matched_all_4stp17: output/matched_combined_2017_4stp17.csv

  match_2017_4stp20:
    run: python:latest python analysis/match_2017_4stp20.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp20: output/matching_report_2017_4stp20.txt
      highly_sensitive:
        matched_matches_4stp20: output/matched_matches_2017_4stp20.csv
        matched_cases_4stp20: output/matched_cases_2017_4stp20.csv
        matched_all_4stp20: output/matched_combined_2017_4stp20.csv

  match_2017_4stp21:
    run: python:latest python analysis/match_2017_4stp21.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp21: output/matching_report_2017_4stp21.txt
      highly_sensitive:
        matched_matches_4stp21: output/matched_matches_2017_4stp21.csv
        matched_cases_4stp21: output/matched_cases_2017_4stp21.csv
        matched_all_4stp21: output/matched_combined_2017_4stp21.csv

  match_2017_4stp22:
    run: python:latest python analysis/match_2017_4stp22.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp22: output/matching_report_2017_4stp22.txt
      highly_sensitive:
        matched_matches_4stp22: output/matched_matches_2017_4stp22.csv
        matched_cases_4stp22: output/matched_cases_2017_4stp22.csv
        matched_all_4stp22: output/matched_combined_2017_4stp22.csv

  match_2017_4stp23:
    run: python:latest python analysis/match_2017_4stp23.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp23: output/matching_report_2017_4stp23.txt
      highly_sensitive:
        matched_matches_4stp23: output/matched_matches_2017_4stp23.csv
        matched_cases_4stp23: output/matched_cases_2017_4stp23.csv
        matched_all_4stp23: output/matched_combined_2017_4stp23.csv

  match_2017_4stp24:
    run: python:latest python analysis/match_2017_4stp24.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp24: output/matching_report_2017_4stp24.txt
      highly_sensitive:
        matched_matches_4stp24: output/matched_matches_2017_4stp24.csv
        matched_cases_4stp24: output/matched_cases_2017_4stp24.csv
        matched_all_4stp24: output/matched_combined_2017_4stp24.csv

  match_2017_4stp25:
    run: python:latest python analysis/match_2017_4stp25.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp25: output/matching_report_2017_4stp25.txt
      highly_sensitive:
        matched_matches_4stp25: output/matched_matches_2017_4stp25.csv
        matched_cases_4stp25: output/matched_cases_2017_4stp25.csv
        matched_all_4stp25: output/matched_combined_2017_4stp25.csv

  match_2017_4stp26:
    run: python:latest python analysis/match_2017_4stp26.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp26: output/matching_report_2017_4stp26.txt
      highly_sensitive:
        matched_matches_4stp26: output/matched_matches_2017_4stp26.csv
        matched_cases_4stp26: output/matched_cases_2017_4stp26.csv
        matched_all_4stp26: output/matched_combined_2017_4stp26.csv

  match_2017_4stp27:
    run: python:latest python analysis/match_2017_4stp27.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp27: output/matching_report_2017_4stp27.txt
      highly_sensitive:
        matched_matches_4stp27: output/matched_matches_2017_4stp27.csv
        matched_cases_4stp27: output/matched_cases_2017_4stp27.csv
        matched_all_4stp27: output/matched_combined_2017_4stp27.csv

  match_2017_4stp29:
    run: python:latest python analysis/match_2017_4stp29.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp29: output/matching_report_2017_4stp29.txt
      highly_sensitive:
        matched_matches_4stp29: output/matched_matches_2017_4stp29.csv
        matched_cases_4stp29: output/matched_cases_2017_4stp29.csv
        matched_all_4stp29: output/matched_combined_2017_4stp29.csv

  match_2017_4stp33:
    run: python:latest python analysis/match_2017_4stp33.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp33: output/matching_report_2017_4stp33.txt
      highly_sensitive:
        matched_matches_4stp33: output/matched_matches_2017_4stp33.csv
        matched_cases_4stp33: output/matched_cases_2017_4stp33.csv
        matched_all_4stp33: output/matched_combined_2017_4stp33.csv

  match_2017_4stp35:
    run: python:latest python analysis/match_2017_4stp35.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp35: output/matching_report_2017_4stp35.txt
      highly_sensitive:
        matched_matches_4stp35: output/matched_matches_2017_4stp35.csv
        matched_cases_4stp35: output/matched_cases_2017_4stp35.csv
        matched_all_4stp35: output/matched_combined_2017_4stp35.csv

  match_2017_4stp36:
    run: python:latest python analysis/match_2017_4stp36.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp36: output/matching_report_2017_4stp36.txt
      highly_sensitive:
        matched_matches_4stp36: output/matched_matches_2017_4stp36.csv
        matched_cases_4stp36: output/matched_cases_2017_4stp36.csv
        matched_all_4stp36: output/matched_combined_2017_4stp36.csv

  match_2017_4stp37:
    run: python:latest python analysis/match_2017_4stp37.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp37: output/matching_report_2017_4stp37.txt
      highly_sensitive:
        matched_matches_4stp37: output/matched_matches_2017_4stp37.csv
        matched_cases_4stp37: output/matched_cases_2017_4stp37.csv
        matched_all_4stp37: output/matched_combined_2017_4stp37.csv

  match_2017_4stp40:
    run: python:latest python analysis/match_2017_4stp40.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp40: output/matching_report_2017_4stp40.txt
      highly_sensitive:
        matched_matches_4stp40: output/matched_matches_2017_4stp40.csv
        matched_cases_4stp40: output/matched_cases_2017_4stp40.csv
        matched_all_4stp40: output/matched_combined_2017_4stp40.csv

  match_2017_4stp41:
    run: python:latest python analysis/match_2017_4stp41.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp41: output/matching_report_2017_4stp41.txt
      highly_sensitive:
        matched_matches_4stp41: output/matched_matches_2017_4stp41.csv
        matched_cases_4stp41: output/matched_cases_2017_4stp41.csv
        matched_all_4stp41: output/matched_combined_2017_4stp41.csv

  match_2017_4stp42:
    run: python:latest python analysis/match_2017_4stp42.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp42: output/matching_report_2017_4stp42.txt
      highly_sensitive:
        matched_matches_4stp42: output/matched_matches_2017_4stp42.csv
        matched_cases_4stp42: output/matched_cases_2017_4stp42.csv
        matched_all_4stp42: output/matched_combined_2017_4stp42.csv

  match_2017_4stp43:
    run: python:latest python analysis/match_2017_4stp43.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp43: output/matching_report_2017_4stp43.txt
      highly_sensitive:
        matched_matches_4stp43: output/matched_matches_2017_4stp43.csv
        matched_cases_4stp43: output/matched_cases_2017_4stp43.csv
        matched_all_4stp43: output/matched_combined_2017_4stp43.csv

  match_2017_4stp44:
    run: python:latest python analysis/match_2017_4stp44.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp44: output/matching_report_2017_4stp44.txt
      highly_sensitive:
        matched_matches_4stp44: output/matched_matches_2017_4stp44.csv
        matched_cases_4stp44: output/matched_cases_2017_4stp44.csv
        matched_all_4stp44: output/matched_combined_2017_4stp44.csv

  match_2017_4stp49:
    run: python:latest python analysis/match_2017_4stp49.py
    needs: [extract_covid_matching, clean_covid_matching_2017, extract_2017_matching, clean_2017_matching, split_stps_2017]
    outputs:
      moderately_sensitive:
        matching_report_4stp49: output/matching_report_2017_4stp49.txt
      highly_sensitive:
        matched_matches_4stp49: output/matched_matches_2017_4stp49.csv
        matched_cases_4stp49: output/matched_cases_2017_4stp49.csv
        matched_all_4stp49: output/matched_combined_2017_4stp49.csv

  combine_stps_covid1_2017:
    run: stata-mp:latest analysis/combine_stps_covid1_2017.do
    needs: [match_2017_1stp5, match_2017_1stp6, match_2017_1stp7, match_2017_1stp8, match_2017_1stp9,
    match_2017_1stp10, match_2017_1stp12, match_2017_1stp13, match_2017_1stp14, match_2017_1stp15,
    match_2017_1stp16, match_2017_1stp17, match_2017_1stp20, match_2017_1stp21, match_2017_1stp22,
    match_2017_1stp23, match_2017_1stp24, match_2017_1stp25, match_2017_1stp26, match_2017_1stp27,
    match_2017_1stp29, match_2017_1stp33, match_2017_1stp35, match_2017_1stp36, match_2017_1stp37, 
    match_2017_1stp40, match_2017_1stp41, match_2017_1stp42, match_2017_1stp43, match_2017_1stp44, 
    match_2017_1stp49]
    outputs:
      highly_sensitive:
        matched_cases1_combined: output/input_combined_stps_covid1_2017.csv
      moderately_sensitive:
        log: logs/combine_stps_covid1_2017.log

  combine_stps_matches1_2017:
    run: stata-mp:latest analysis/combine_stps_matches1_2017.do
    needs: [match_2017_1stp5, match_2017_1stp6, match_2017_1stp7, match_2017_1stp8, match_2017_1stp9,
    match_2017_1stp10, match_2017_1stp12, match_2017_1stp13, match_2017_1stp14, match_2017_1stp15,
    match_2017_1stp16, match_2017_1stp17, match_2017_1stp20, match_2017_1stp21, match_2017_1stp22,
    match_2017_1stp23, match_2017_1stp24, match_2017_1stp25, match_2017_1stp26, match_2017_1stp27,
    match_2017_1stp29, match_2017_1stp33, match_2017_1stp35, match_2017_1stp36, match_2017_1stp37, 
    match_2017_1stp40, match_2017_1stp41, match_2017_1stp42, match_2017_1stp43, match_2017_1stp44, 
    match_2017_1stp49]
    outputs:
      highly_sensitive:
        matched_matches1_combined: output/input_combined_stps_matches1_2017.csv
      moderately_sensitive:
        log: logs/combine_stps_matches1_2017.log

  combine_stps_covid2_2017:
    run: stata-mp:latest analysis/combine_stps_covid2_2017.do
    needs: [match_2017_2stp5, match_2017_2stp6, match_2017_2stp7, match_2017_2stp8, match_2017_2stp9,
    match_2017_2stp10, match_2017_2stp12, match_2017_2stp13, match_2017_2stp14, match_2017_2stp15,
    match_2017_2stp16, match_2017_2stp17, match_2017_2stp20, match_2017_2stp21, match_2017_2stp22,
    match_2017_2stp23, match_2017_2stp24, match_2017_2stp25, match_2017_2stp26, match_2017_2stp27,
    match_2017_2stp29, match_2017_2stp33, match_2017_2stp35, match_2017_2stp36, match_2017_2stp37, 
    match_2017_2stp40, match_2017_2stp41, match_2017_2stp42, match_2017_2stp43, match_2017_2stp44, 
    match_2017_2stp49]
    outputs:
      highly_sensitive:
        matched_cases2_combined: output/input_combined_stps_covid2_2017.csv
      moderately_sensitive:
        log: logs/combine_stps_covid2_2017.log

  combine_stps_matches2_2017:
    run: stata-mp:latest analysis/combine_stps_matches2_2017.do
    needs: [match_2017_2stp5, match_2017_2stp6, match_2017_2stp7, match_2017_2stp8, match_2017_2stp9,
    match_2017_2stp10, match_2017_2stp12, match_2017_2stp13, match_2017_2stp14, match_2017_2stp15,
    match_2017_2stp16, match_2017_2stp17, match_2017_2stp20, match_2017_2stp21, match_2017_2stp22,
    match_2017_2stp23, match_2017_2stp24, match_2017_2stp25, match_2017_2stp26, match_2017_2stp27,
    match_2017_2stp29, match_2017_2stp33, match_2017_2stp35, match_2017_2stp36, match_2017_2stp37, 
    match_2017_2stp40, match_2017_2stp41, match_2017_2stp42, match_2017_2stp43, match_2017_2stp44, 
    match_2017_2stp49]
    outputs:
      highly_sensitive:
        matched_matches2_combined: output/input_combined_stps_matches2_2017.csv
      moderately_sensitive:
        log: logs/combine_stps_matches2_2017.log



