-------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /workspace/logs/cox_2017_covid_severity.log
  log type:  text
 opened on:  27 Jan 2023, 15:02:05

. 
. cap file close tablecontent

. file open tablecontent using ./output/cox_2017_covid_severity.txt, write text
>  replace
(note: file ./output/cox_2017_covid_severity.txt not found)

. file write tablecontent ("Kidney outcomes by SARS-CoV-2 severity compared to 
> matched historical general population comparator") _n

. file write tablecontent _n

. file write tablecontent ("Historical general population matched on age, sex a
> nd STP") _n

. file write tablecontent ("Restricted to those who survived 28 days after firs
> t recorded SARS-CoV-2 or equivalent date of matching") _n

. file write tablecontent ("All models stratified by matched set and clustering
>  by general practice accounted for using robust standard errors") _n

. file write tablecontent _n

. file write tablecontent ("Cox regression models:") _n

. file write tablecontent ("1. Crude") _n

. file write tablecontent ("2. Minimally adjusted: adjusted for age (using spli
> ne functions) and sex") _n

. file write tablecontent ("3. Additionally adjusted: additionally adjusted for
>  ethnicity, socioeconomic deprivation, region, rural/urban, body mass index a
> nd smoking") _n

. file write tablecontent ("4. Fully adjusted: additionally adjusted for cardio
> vascular diseases, diabetes, hypertension, immunocompromise and cancer") _n

. file write tablecontent _n

. file write tablecontent _tab _tab _tab _tab _tab ("Number") _tab _tab ("Event
> ") _tab ("Total person-years") _tab ("Rate per 100,000") _tab ("Crude") _tab 
> _tab _tab ("Minimally adjusted") _tab ("Additionally adjusted") _tab ("Fully 
> adjusted") _tab _tab _n

. file write tablecontent _tab _tab _tab _tab _tab _tab _tab _tab _tab _tab _ta
> b _tab _tab _tab ("HR") _tab ("95% CI") _tab _tab ("HR") _tab ("95% CI") _tab
>  _tab ("HR") _tab ("95% CI") _tab _tab ("HR") _tab ("95% CI") _tab _tab _n

. file write tablecontent ("By SARS-CoV-2 severity") _n

. 
. use ./output/analysis_2017.dta, clear

. foreach outcome of varlist esrd egfr_half aki death {
  2. stset exit_date_`outcome', fail(`outcome'_date) origin(index_date_`outcome
> ') id(patient_id) scale(365.25)
  3. bysort covid_severity: egen total_follow_up_`outcome' = total(_t)
  4. 
. stcox i.covid_severity, vce(cluster practice_id) strata(set_id)
  5. matrix table = r(table)
  6. local crude_`outcome'_1b: display %4.2f table[1,2]
  7. local crude_`outcome'_1ll: display %4.2f table[5,2]
  8. local crude_`outcome'_1ul: display %4.2f table[6,2]
  9. local crude_`outcome'_2b: display %4.2f table[1,3]
 10. local crude_`outcome'_2ll: display %4.2f table[5,3]
 11. local crude_`outcome'_2ul: display %4.2f table[6,3]
 12. local crude_`outcome'_3b: display %4.2f table[1,4]
 13. local crude_`outcome'_3ll: display %4.2f table[5,4]
 14. local crude_`outcome'_3ul: display %4.2f table[6,4]
 15. 
. stcox i.covid_severity i.sex age1 age2 age3, vce(cluster practice_id) strata(
> set_id)
 16. matrix table = r(table)
 17. local minimal_`outcome'_1b: display %4.2f table[1,2]
 18. local minimal_`outcome'_1ll: display %4.2f table[5,2]
 19. local minimal_`outcome'_1ul: display %4.2f table[6,2]
 20. local minimal_`outcome'_2b: display %4.2f table[1,3]
 21. local minimal_`outcome'_2ll: display %4.2f table[5,3]
 22. local minimal_`outcome'_2ul: display %4.2f table[6,3]
 23. local minimal_`outcome'_3b: display %4.2f table[1,4]
 24. local minimal_`outcome'_3ll: display %4.2f table[5,4]
 25. local minimal_`outcome'_3ul: display %4.2f table[6,4]
 26. 
. stcox i.covid_severity i.sex i.ethnicity i.imd i.urban i.region i.bmi i.smoki
> ng age1 age2 age3, vce(cluster practice_id) strata(set_id)
 27. matrix table = r(table)
 28. local additional_`outcome'_1b: display %4.2f table[1,2]
 29. local additional_`outcome'_1ll: display %4.2f table[5,2]
 30. local additional_`outcome'_1ul: display %4.2f table[6,2]
 31. local additional_`outcome'_2b: display %4.2f table[1,3]
 32. local additional_`outcome'_2ll: display %4.2f table[5,3]
 33. local additional_`outcome'_2ul: display %4.2f table[6,3]
 34. local additional_`outcome'_3b: display %4.2f table[1,4]
 35. local additional_`outcome'_3ll: display %4.2f table[5,4]
 36. local additional_`outcome'_3ul: display %4.2f table[6,4]
 37. 
. stcox i.covid_severity i.sex i.ethnicity i.imd i.urban i.region i.bmi i.cardi
> ovascular i.diabetes i.hypertension i.immunosuppressed i.non_haem_cancer i.sm
> oking age1 age2 age3, vce(cluster practice_id) strata(set_id)         
 38. matrix table = r(table)
 39. local full_`outcome'_1b: display %4.2f table[1,2]
 40. local full_`outcome'_1ll: display %4.2f table[5,2]
 41. local full_`outcome'_1ul: display %4.2f table[6,2]
 42. local full_`outcome'_2b: display %4.2f table[1,3]
 43. local full_`outcome'_2ll: display %4.2f table[5,3]
 44. local full_`outcome'_2ul: display %4.2f table[6,3]
 45. local full_`outcome'_3b: display %4.2f table[1,4]
 46. local full_`outcome'_3ll: display %4.2f table[5,4]
 47. local full_`outcome'_3ul: display %4.2f table[6,4]
 48.                                                                           
>                                               
. local lab0: label covid_severity 0
 49. local lab1: label covid_severity 1
 50. local lab2: label covid_severity 2
 51. local lab3: label covid_severity 3
 52. 
.         qui safecount if covid_severity==0 & `outcome'_denominator==1 & _st==
> 1
 53.         local denominator = round(r(N),5)
 54.         qui safecount if covid_severity== 0 & `outcome'==1 & _st==1
 55.         local event = round(r(N),5)
 56.         qui su total_follow_up_`outcome' if covid_severity==0
 57.         local person_year = r(mean)
 58.         local rate = 100000*(`event'/`person_year')
 59.         
.         file write tablecontent _n
 60.         file write tablecontent ("`outcome'") _n
 61.         file write tablecontent _tab ("`lab0'") _tab _tab (`denominator') 
> _tab _tab (`event') _tab %10.0f (`person_year') _tab _tab %3.2f (`rate') _tab
>  _tab _tab
 62.         file write tablecontent ("1.00") _tab _tab _tab ("1.00") _tab _tab
>  _tab ("1.00") _tab _tab _tab ("1.00") _n
 63.         
. forvalues severity=1/3 {
 64.         qui safecount if covid_severity==`severity'  & `outcome'_denominat
> or==1 & _st==1
 65.         local denominator = round(r(N),5)
 66.         qui safecount if covid_severity==`severity' & `outcome'==1 &  _st=
> =1
 67.         local event = round(r(N),5)
 68.         qui su total_follow_up_`outcome' if covid_severity==`severity'
 69.         local person_year = r(mean)
 70.         local rate = 100000*(`event'/`person_year')
 71.         file write tablecontent _tab ("`lab`severity''") _tab _tab (`denom
> inator') _tab _tab (`event') _tab %10.0f (`person_year') _tab _tab %3.2f (`ra
> te') _tab _tab
 72.         file write tablecontent  _tab %4.2f (`crude_`outcome'_`severity'b'
> ) _tab ("(") %4.2f (`crude_`outcome'_`severity'll') (" - ") %4.2f (`crude_`ou
> tcome'_`severity'ul') (")")
 73.         file write tablecontent  _tab %4.2f (`minimal_`outcome'_`severity'
> b') _tab ("(") %4.2f (`minimal_`outcome'_`severity'll') (" - ") %4.2f (`minim
> al_`outcome'_`severity'ul') (")")
 74.         file write tablecontent  _tab %4.2f (`additional_`outcome'_`severi
> ty'b') _tab ("(") %4.2f (`additional_`outcome'_`severity'll') (" - ") %4.2f (
> `additional_`outcome'_`severity'ul') (")")
 75.         file write tablecontent  _tab %4.2f (`full_`outcome'_`severity'b')
>  _tab ("(") %4.2f (`full_`outcome'_`severity'll') (" - ") %4.2f (`full_`outco
> me'_`severity'ul') (")") _tab _n
 76.         }
 77. }

                id:  patient_id
     failure event:  esrd_date != 0 & esrd_date < .
obs. time interval:  (exit_date_esrd[_n-1], exit_date_esrd]
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date_esrd

------------------------------------------------------------------------------
     27,845  total observations
         37  observations begin on or after (first) failure
------------------------------------------------------------------------------
     27,808  observations remaining, representing
     27,534  subjects
      2,778  failures in single-failure-per-subject data
 47,368.413  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  5.744011

         failure _d:  esrd_date
   analysis time _t:  (exit_date_esrd-origin)/365.25
             origin:  time index_date_esrd
                 id:  patient_id

Iteration 0:   log pseudolikelihood =  -3290.745
Iteration 1:   log pseudolikelihood =  -3287.198
Iteration 2:   log pseudolikelihood = -3287.1919
Refining estimates:
Iteration 0:   log pseudolikelihood = -3287.1919

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       27,534             Number of obs    =      27,808
No. of failures      =        2,778
Time at risk         =  47368.41342
                                                Wald chi2(3)     =       15.31
Log pseudolikelihood =   -3287.1919             Prob > chi2      =      0.0016

                           (Std. Err. adjusted for 38 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   .9468247   .0321385    -1.61   0.107     .8858839    1.011958
Hospitali..  |   1.324911   .1573238     2.37   0.018     1.049815    1.672095
Critical ..  |    1.21308   .0816649     2.87   0.004      1.06313     1.38418
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  esrd_date
   analysis time _t:  (exit_date_esrd-origin)/365.25
             origin:  time index_date_esrd
                 id:  patient_id

Iteration 0:   log pseudolikelihood =  -3290.745
Iteration 1:   log pseudolikelihood = -3287.0449
Iteration 2:   log pseudolikelihood = -3287.0389
Refining estimates:
Iteration 0:   log pseudolikelihood = -3287.0389

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       27,534             Number of obs    =      27,808
No. of failures      =        2,778
Time at risk         =  47368.41342
                                                Wald chi2(6)     =       22.24
Log pseudolikelihood =   -3287.0389             Prob > chi2      =      0.0011

                           (Std. Err. adjusted for 38 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   .9432129   .0331974    -1.66   0.097     .8803407    1.010575
Hospitali..  |   1.320804   .1594183     2.31   0.021     1.042558    1.673311
Critical ..  |   1.208238    .081524     2.80   0.005     1.058568    1.379069
             |
         sex |
       Male  |          1  (omitted)
        age1 |    1.00379   .0043195     0.88   0.379     .9953593    1.012292
        age2 |   .9899588   .0136957    -0.73   0.466     .9634764    1.017169
        age3 |   1.028191   .0432132     0.66   0.508     .9468896    1.116474
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  esrd_date
   analysis time _t:  (exit_date_esrd-origin)/365.25
             origin:  time index_date_esrd
                 id:  patient_id

Iteration 0:   log pseudolikelihood =  -72.38854
Iteration 1:   log pseudolikelihood =  -57.97082
Iteration 2:   log pseudolikelihood = -57.190308
Iteration 3:   log pseudolikelihood =  -57.15689
Iteration 4:   log pseudolikelihood = -57.156739
Iteration 5:   log pseudolikelihood = -57.156739
Refining estimates:
Iteration 0:   log pseudolikelihood = -57.156739

Stratified Cox regr. -- no ties

No. of subjects      =        3,321             Number of obs    =       3,323
No. of failures      =          344
Time at risk         =  5619.786448
                                                Wald chi2(22)    =     2347.33
Log pseudolikelihood =   -57.156739             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 35 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |    .528288   .1660846    -2.03   0.042     .2852776     .978304
Hospitali..  |    .187503   .1006483    -3.12   0.002     .0654784    .5369307
Critical ..  |   .0757606   .0642232    -3.04   0.002     .0143837    .3990407
             |
         sex |
       Male  |          1  (omitted)
             |
   ethnicity |
South Asian  |   1.022346    .307743     0.07   0.941     .5667244    1.844266
      Black  |   1.137438   .6231648     0.24   0.814      .388671    3.328687
      Mixed  |   .6280994   .4970161    -0.59   0.557     .1331898    2.962004
      Other  |   1.065634   .6301772     0.11   0.914     .3343788    3.396078
             |
         imd |
          2  |   .3634185   .1219063    -3.02   0.003     .1883117    .7013535
          3  |   .6446505   .2148756    -1.32   0.188     .3354292    1.238933
          4  |   .5142281   .2239559    -1.53   0.127     .2189987    1.207452
5 Least d..  |   .9687198   .3653246    -0.08   0.933     .4625856    2.028636
             |
       urban |
      Urban  |   1.257751   .3750086     0.77   0.442     .7011359    2.256251
             |
      region |
       East  |   1.442507   .6002665     0.88   0.379     .6381308    3.260814
     London  |   1.450191   .4688042     1.15   0.250     .7695856    2.732711
 North East  |   .7122327   .2044937    -1.18   0.237     .4057215    1.250305
 North West  |   .9046577   .2992837    -0.30   0.762     .4730262    1.730148
 South East  |   .8159575   .3732361    -0.44   0.657     .3328971    1.999977
 South West  |    .880095   .5510226    -0.20   0.838     .2579865    3.002356
West Midl..  |   1.233896   .4765855     0.54   0.586     .5787708    2.630573
Yorkshire..  |   1.577152   .8815653     0.82   0.415     .5273341    4.716951
             |
         bmi |
Normal (..)  |    .066148   .0406827    -4.42   0.000     .0198156    .2208142
Overweig..)  |   .1091996   .0524918    -4.61   0.000     .0425649    .2801499
Obese I ..)  |   .0666311   .0307422    -5.87   0.000     .0269743    .1645899
Obese II..)  |   .1293012   .0703072    -3.76   0.000     .0445414    .3753543
Obese II..)  |    .128277   .1127655    -2.34   0.019     .0229022     .718491
             |
     smoking |
Current/f..  |   1.772196   .4211439     2.41   0.016     1.112327     2.82352
        age1 |   1.113729   .0973699     1.23   0.218     .9383434    1.321897
        age2 |   .7885011   .2330108    -0.80   0.421     .4418378    1.407155
        age3 |   1.866012   1.608538     0.72   0.469     .3444789    10.10802
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  esrd_date
   analysis time _t:  (exit_date_esrd-origin)/365.25
             origin:  time index_date_esrd
                 id:  patient_id

Iteration 0:   log pseudolikelihood =  -72.38854
Iteration 1:   log pseudolikelihood = -53.955381
Iteration 2:   log pseudolikelihood = -52.231522
Iteration 3:   log pseudolikelihood = -52.025097
Iteration 4:   log pseudolikelihood =  -52.00096
Iteration 5:   log pseudolikelihood = -51.993506
Iteration 6:   log pseudolikelihood = -51.990786
Iteration 7:   log pseudolikelihood = -51.989788
Iteration 8:   log pseudolikelihood = -51.989421
Iteration 9:   log pseudolikelihood = -51.989286
Iteration 10:  log pseudolikelihood = -51.989236
Iteration 11:  log pseudolikelihood = -51.989218
Iteration 12:  log pseudolikelihood = -51.989211
Iteration 13:  log pseudolikelihood = -51.989209
Iteration 14:  log pseudolikelihood = -51.989208
Iteration 15:  log pseudolikelihood = -51.989208
Iteration 16:  log pseudolikelihood = -51.989208
Iteration 17:  log pseudolikelihood = -51.989208
Iteration 18:  log pseudolikelihood = -51.989208
Iteration 19:  log pseudolikelihood = -51.989208
Iteration 20:  log pseudolikelihood = -51.989208
Iteration 21:  log pseudolikelihood = -51.989208
Iteration 22:  log pseudolikelihood = -51.989208
Iteration 23:  log pseudolikelihood = -51.989208
Iteration 24:  log pseudolikelihood = -51.989208
Iteration 25:  log pseudolikelihood = -51.989208
Iteration 26:  log pseudolikelihood = -51.989208
Iteration 27:  log pseudolikelihood = -51.989208
Iteration 28:  log pseudolikelihood = -51.989208
Iteration 29:  log pseudolikelihood = -51.989208
Iteration 30:  log pseudolikelihood = -51.989208
Iteration 31:  log pseudolikelihood = -51.989208
Iteration 32:  log pseudolikelihood = -51.989208
Iteration 33:  log pseudolikelihood = -51.989208
Iteration 34:  log pseudolikelihood = -51.989208
Iteration 35:  log pseudolikelihood = -51.989208
Iteration 36:  log pseudolikelihood = -51.989208
Iteration 37:  log pseudolikelihood = -51.989208
Iteration 38:  log pseudolikelihood = -51.989208
Refining estimates:
Iteration 0:   log pseudolikelihood = -51.989208
Iteration 1:   log pseudolikelihood = -51.989208

Stratified Cox regr. -- no ties

No. of subjects      =        3,321             Number of obs    =       3,323
No. of failures      =          344
Time at risk         =  5619.786448
                                                Wald chi2(22)    =     4380.27
Log pseudolikelihood =   -51.989208             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 35 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |    .461406   .1809945    -1.97   0.049     .2138871    .9953638
Hospitali..  |   .1416469   .0556511    -4.97   0.000     .0655816     .305937
Critical ..  |   .0585951    .050295    -3.31   0.001     .0108952    .3151288
             |
         sex |
       Male  |          1  (omitted)
             |
   ethnicity |
South Asian  |   .4511095   .2935595    -1.22   0.221     .1259977    1.615107
      Black  |   1.195189   .6778021     0.31   0.753     .3932899    3.632122
      Mixed  |   .6639184   .5865962    -0.46   0.643     .1175025    3.751305
      Other  |   1.496382   .8619564     0.70   0.484     .4838685    4.627618
             |
         imd |
          2  |   .4452719   .1173493    -3.07   0.002     .2656411     .746372
          3  |   .6750102   .1941729    -1.37   0.172     .3841089    1.186223
          4  |   .6338681   .2498208    -1.16   0.247     .2927672    1.372383
5 Least d..  |   1.087952   .3854599     0.24   0.812     .5432884    2.178659
             |
       urban |
      Urban  |   .9369624   .2358537    -0.26   0.796     .5720794    1.534575
             |
      region |
       East  |   1.713553   1.195182     0.77   0.440     .4367121    6.723573
     London  |   1.456521   .5258782     1.04   0.298     .7177774    2.955588
 North East  |   1.134011   .3970367     0.36   0.719      .570949    2.252359
 North West  |   1.942342   .7513151     1.72   0.086     .9100673     4.14551
 South East  |   1.105525   .4828108     0.23   0.818     .4697071    2.602015
 South West  |   1.354053   1.102256     0.37   0.710     .2746134    6.676512
West Midl..  |   .9812282    .372352    -0.05   0.960     .4664015    2.064335
Yorkshire..  |   2.382372   1.760046     1.18   0.240     .5599636    10.13583
             |
         bmi |
Normal (..)  |   .1237599   .0608828    -4.25   0.000     .0471886    .3245807
Overweig..)  |   .2048354   .0820187    -3.96   0.000     .0934487    .4489903
Obese I ..)  |    .120242   .0468261    -5.44   0.000     .0560494    .2579536
Obese II..)  |   .2626678   .1529635    -2.30   0.022     .0838906    .8224327
Obese II..)  |   .2271587   .2008994    -1.68   0.094     .0401352     1.28568
             |
1.cardiova~r |   .2179531   .1194329    -2.78   0.005     .0744605    .6379702
  1.diabetes |   .8803086   .2263088    -0.50   0.620     .5318743    1.457005
1.hyperten~n |   .8388951   .3063626    -0.48   0.630     .4100632    1.716187
1.immunosu~d |   1.189543   .5745848     0.36   0.719     .4615562    3.065744
1.non_haem~r |   2.60e-18   2.64e-18   -39.90   0.000     3.56e-19    1.90e-17
             |
     smoking |
Current/f..  |   2.119288   .6447998     2.47   0.014     1.167372    3.847429
        age1 |   1.139328   .0966241     1.54   0.124     .9648504    1.345356
        age2 |   .7500906   .1941792    -1.11   0.267     .4516058    1.245856
        age3 |   2.145582   1.555634     1.05   0.292     .5180713    8.885885
------------------------------------------------------------------------------
                                                          Stratified by set_id

                id:  patient_id
     failure event:  egfr_half_date != 0 & egfr_half_date < .
obs. time interval:  (exit_date_egfr_half[_n-1], exit_date_egfr_half]
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date_egfr_half

------------------------------------------------------------------------------
     27,845  total observations
     11,134  event time missing (exit_date_egfr_half>=.)        PROBABLE ERROR
      1,208  ignored because never entered
         13  observations end on or before enter()
         61  observations begin on or after (first) failure
------------------------------------------------------------------------------
     15,429  observations remaining, representing
     15,366  subjects
      7,539  failures in single-failure-per-subject data
 18,265.892  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  5.741273

         failure _d:  egfr_half_date
   analysis time _t:  (exit_date_egfr_half-origin)/365.25
             origin:  time index_date_egfr_half
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -4864.0839
Iteration 1:   log pseudolikelihood = -4862.5096
Iteration 2:   log pseudolikelihood = -4862.5094
Refining estimates:
Iteration 0:   log pseudolikelihood = -4862.5094

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       15,366             Number of obs    =      15,429
No. of failures      =        7,539
Time at risk         =  18265.89185
                                                Wald chi2(3)     =       14.20
Log pseudolikelihood =   -4862.5094             Prob > chi2      =      0.0026

                           (Std. Err. adjusted for 35 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   1.026494   .0302515     0.89   0.375     .9688817    1.087531
Hospitali..  |   1.009216   .0615718     0.15   0.880     .8954736    1.137406
Critical ..  |   1.204155   .0612985     3.65   0.000     1.089812    1.330496
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  egfr_half_date
   analysis time _t:  (exit_date_egfr_half-origin)/365.25
             origin:  time index_date_egfr_half
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -4864.0839
Iteration 1:   log pseudolikelihood =  -4861.479
Iteration 2:   log pseudolikelihood = -4861.4788
Refining estimates:
Iteration 0:   log pseudolikelihood = -4861.4788

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       15,366             Number of obs    =      15,429
No. of failures      =        7,539
Time at risk         =  18265.89185
                                                Wald chi2(6)     =       24.58
Log pseudolikelihood =   -4861.4788             Prob > chi2      =      0.0004

                           (Std. Err. adjusted for 35 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   1.019476   .0313114     0.63   0.530     .9599173     1.08273
Hospitali..  |   1.004418   .0621024     0.07   0.943     .8897855    1.133819
Critical ..  |   1.196623   .0615328     3.49   0.000     1.081899    1.323512
             |
         sex |
       Male  |          1  (omitted)
        age1 |   1.005115   .0036992     1.39   0.166     .9978909    1.012392
        age2 |   .9904803   .0113347    -0.84   0.403      .968512    1.012947
        age3 |    1.02461   .0339918     0.73   0.464      .960107    1.093446
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  egfr_half_date
   analysis time _t:  (exit_date_egfr_half-origin)/365.25
             origin:  time index_date_egfr_half
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -83.125546
Iteration 1:   log pseudolikelihood = -67.798099
Iteration 2:   log pseudolikelihood = -66.802202
Iteration 3:   log pseudolikelihood = -66.740593
Iteration 4:   log pseudolikelihood =  -66.73085
Iteration 5:   log pseudolikelihood = -66.727344
Iteration 6:   log pseudolikelihood = -66.726061
Iteration 7:   log pseudolikelihood =  -66.72559
Iteration 8:   log pseudolikelihood = -66.725417
Iteration 9:   log pseudolikelihood = -66.725353
Iteration 10:  log pseudolikelihood =  -66.72533
Iteration 11:  log pseudolikelihood = -66.725321
Iteration 12:  log pseudolikelihood = -66.725318
Iteration 13:  log pseudolikelihood = -66.725317
Iteration 14:  log pseudolikelihood = -66.725316
Iteration 15:  log pseudolikelihood = -66.725316
Iteration 16:  log pseudolikelihood = -66.725316
Iteration 17:  log pseudolikelihood = -66.725316
Iteration 18:  log pseudolikelihood = -66.725316
Refining estimates:
Iteration 0:   log pseudolikelihood = -66.725316
Iteration 1:   log pseudolikelihood = -66.725316
Iteration 2:   log pseudolikelihood = -66.725316
Iteration 3:   log pseudolikelihood = -66.725316
Iteration 4:   log pseudolikelihood = -66.725316
Iteration 5:   log pseudolikelihood = -66.725316
Iteration 6:   log pseudolikelihood = -66.725316
Iteration 7:   log pseudolikelihood = -66.725316
Iteration 8:   log pseudolikelihood = -66.725316
Iteration 9:   log pseudolikelihood = -66.725316
Iteration 10:  log pseudolikelihood = -66.725316
Iteration 11:  log pseudolikelihood = -66.725316
Iteration 12:  log pseudolikelihood = -66.725316
Iteration 13:  log pseudolikelihood = -66.725316
Iteration 14:  log pseudolikelihood = -66.725316
Iteration 15:  log pseudolikelihood = -66.725316
Iteration 16:  log pseudolikelihood = -66.725316
Iteration 17:  log pseudolikelihood = -66.725316

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        1,842             Number of obs    =       1,843
No. of failures      =          896
Time at risk         =  2163.937029
                                                Wald chi2(22)    =    40818.36
Log pseudolikelihood =   -66.725316             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 32 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   1.110215   .2204082     0.53   0.598     .7523503    1.638302
Hospitali..  |   8.71e-16   5.71e-16   -52.93   0.000     2.41e-16    3.15e-15
Critical ..  |   1.900494   1.663151     0.73   0.463     .3419534    10.56248
             |
         sex |
       Male  |          1  (omitted)
             |
   ethnicity |
South Asian  |   .2836001   .2440648    -1.46   0.143     .0525009    1.531955
      Black  |   1.428057   .5269306     0.97   0.334     .6928924    2.943239
      Mixed  |   .2152132   .1656491    -2.00   0.046     .0476103    .9728292
      Other  |   1.156163   .4211846     0.40   0.690     .5661484    2.361064
             |
         imd |
          2  |   .7126233   .1715995    -1.41   0.159     .4445195    1.142429
          3  |   1.372124   .3718654     1.17   0.243     .8066881    2.333895
          4  |   .7113339   .1855926    -1.31   0.192      .426568    1.186202
5 Least d..  |   1.121531   .3646008     0.35   0.724     .5930513    2.120948
             |
       urban |
      Urban  |   .6997762   .1307395    -1.91   0.056      .485209    1.009228
             |
      region |
       East  |   1.160417   .5517233     0.31   0.754     .4569916    2.946592
     London  |   1.382064   .5254397     0.85   0.395     .6560157    2.911669
 North East  |   1.247701   .7602607     0.36   0.716     .3779622    4.118817
 North West  |   .1640583   .1146143    -2.59   0.010     .0417188    .6451551
 South East  |   .7640763   .3676013    -0.56   0.576     .2975904    1.961799
 South West  |   .6900492   .2833983    -0.90   0.366     .3085301    1.543343
West Midl..  |   1.418325   .5873665     0.84   0.399     .6298982    3.193605
Yorkshire..  |   1.138217   .5695795     0.26   0.796      .426847    3.035135
             |
         bmi |
Normal (..)  |   1.031562   .3645534     0.09   0.930     .5160371    2.062098
Overweig..)  |   1.039509   .4691509     0.09   0.932     .4292047    2.517632
Obese I ..)  |   1.717738   .5543252     1.68   0.094     .9125754    3.233294
Obese II..)  |   .4320046   .2526381    -1.44   0.151     .1373099    1.359173
Obese II..)  |   .1235088   .0726836    -3.55   0.000      .038974    .3913997
             |
     smoking |
Current/f..  |   .9022926   .2361814    -0.39   0.694     .5401812    1.507146
        age1 |   .9639767    .036432    -0.97   0.332     .8951518    1.038093
        age2 |   1.303243   .1540137     2.24   0.025     1.033791    1.642927
        age3 |   .4222935   .1412458    -2.58   0.010     .2192352    .8134268
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  egfr_half_date
   analysis time _t:  (exit_date_egfr_half-origin)/365.25
             origin:  time index_date_egfr_half
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -83.125546
Iteration 1:   log pseudolikelihood = -65.036681
Iteration 2:   log pseudolikelihood = -63.518564
Iteration 3:   log pseudolikelihood = -63.400774
Iteration 4:   log pseudolikelihood = -63.390532
Iteration 5:   log pseudolikelihood = -63.387027
Iteration 6:   log pseudolikelihood = -63.385744
Iteration 7:   log pseudolikelihood = -63.385272
Iteration 8:   log pseudolikelihood = -63.385099
Iteration 9:   log pseudolikelihood = -63.385036
Iteration 10:  log pseudolikelihood = -63.385012
Iteration 11:  log pseudolikelihood = -63.385004
Iteration 12:  log pseudolikelihood =    -63.385
Iteration 13:  log pseudolikelihood = -63.384999
Iteration 14:  log pseudolikelihood = -63.384999
Iteration 15:  log pseudolikelihood = -63.384999
Iteration 16:  log pseudolikelihood = -63.384999
Iteration 17:  log pseudolikelihood = -63.384999
Iteration 18:  log pseudolikelihood = -63.384999
Refining estimates:
Iteration 0:   log pseudolikelihood = -63.384999
Iteration 1:   log pseudolikelihood = -63.384999
Iteration 2:   log pseudolikelihood = -63.384999
Iteration 3:   log pseudolikelihood = -63.384999
Iteration 4:   log pseudolikelihood = -63.384999
Iteration 5:   log pseudolikelihood = -63.384999
Iteration 6:   log pseudolikelihood = -63.384999
Iteration 7:   log pseudolikelihood = -63.384999
Iteration 8:   log pseudolikelihood = -63.384999
Iteration 9:   log pseudolikelihood = -63.384999
Iteration 10:  log pseudolikelihood = -63.384999
Iteration 11:  log pseudolikelihood = -63.384999
Iteration 12:  log pseudolikelihood = -63.384999
Iteration 13:  log pseudolikelihood = -63.384999
Iteration 14:  log pseudolikelihood = -63.384999
Iteration 15:  log pseudolikelihood = -63.384999

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =        1,842             Number of obs    =       1,843
No. of failures      =          896
Time at risk         =  2163.937029
                                                Wald chi2(22)    =   448725.15
Log pseudolikelihood =   -63.384999             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 32 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   1.277314   .3410255     0.92   0.359     .7568999    2.155544
Hospitali..  |   1.01e-15   9.23e-16   -37.69   0.000     1.67e-16    6.07e-15
Critical ..  |   4.281457   2.423844     2.57   0.010     1.411576    12.98611
             |
         sex |
       Male  |          1  (omitted)
             |
   ethnicity |
South Asian  |   .3288076   .3016736    -1.21   0.225     .0544482    1.985639
      Black  |   1.670964   .7777387     1.10   0.270     .6710909    4.160572
      Mixed  |   .2664321   .2142852    -1.64   0.100     .0550788    1.288808
      Other  |   1.427518    .628365     0.81   0.419     .6024206    3.382701
             |
         imd |
          2  |   .5061687   .1681224    -2.05   0.040     .2639802    .9705531
          3  |   1.525293    .542256     1.19   0.235     .7598765    3.061705
          4  |   1.042297    .365951     0.12   0.906     .5237621    2.074191
5 Least d..  |   .7493355   .3195922    -0.68   0.499     .3248166    1.728679
             |
       urban |
      Urban  |   .6681387   .1130568    -2.38   0.017     .4795496     .930893
             |
      region |
       East  |   1.298961   .7086835     0.48   0.632     .4458615    3.784358
     London  |    2.11191   .9450139     1.67   0.095      .878596    5.076467
 North East  |   1.768624   1.237261     0.82   0.415     .4489187    6.967922
 North West  |    .319404   .1833098    -1.99   0.047     .1037111     .983683
 South East  |   1.480229   .6659173     0.87   0.383     .6129079    3.574891
 South West  |   .9032326   .3435528    -0.27   0.789     .4285853     1.90354
West Midl..  |   2.513949   1.774194     1.31   0.191     .6304197    10.02497
Yorkshire..  |   1.106812    .525886     0.21   0.831     .4361518    2.808731
             |
         bmi |
Normal (..)  |   .7309245   .3113203    -0.74   0.462     .3171926     1.68431
Overweig..)  |   .7746386   .2738624    -0.72   0.470     .3874083    1.548921
Obese I ..)  |   1.688524   .4868795     1.82   0.069     .9595472     2.97131
Obese II..)  |   .4651545   .2667536    -1.33   0.182     .1511666    1.431326
Obese II..)  |   .1107645   .0615737    -3.96   0.000     .0372581     .329292
             |
1.cardiova~r |   .6471232   .1369108    -2.06   0.040      .427464    .9796577
  1.diabetes |    .676697   .1535408    -1.72   0.085     .4337693    1.055674
1.hyperten~n |   2.295576   .6116033     3.12   0.002     1.361785    3.869677
1.immunosu~d |   .6473566   .2584219    -1.09   0.276     .2960382    1.415597
1.non_haem~r |   4.538201   2.862015     2.40   0.016      1.31848    15.62046
             |
     smoking |
Current/f..  |   .9594945   .2888686    -0.14   0.891      .531835    1.731044
        age1 |   .9798212   .0361645    -0.55   0.581     .9114431    1.053329
        age2 |   1.199086   .1411778     1.54   0.123     .9519883     1.51032
        age3 |   .5681814   .1911617    -1.68   0.093     .2938358    1.098675
------------------------------------------------------------------------------
                                                          Stratified by set_id

                id:  patient_id
     failure event:  aki_date != 0 & aki_date < .
obs. time interval:  (exit_date_aki[_n-1], exit_date_aki]
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date_aki

------------------------------------------------------------------------------
     27,845  total observations
        971  observations end on or before enter()
         65  observations begin on or after (first) failure
------------------------------------------------------------------------------
     26,809  observations remaining, representing
     26,563  subjects
      4,324  failures in single-failure-per-subject data
 44,454.261  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  5.744011

         failure _d:  aki_date
   analysis time _t:  (exit_date_aki-origin)/365.25
             origin:  time index_date_aki
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -4911.2845
Iteration 1:   log pseudolikelihood = -4908.3955
Iteration 2:   log pseudolikelihood = -4908.3913
Refining estimates:
Iteration 0:   log pseudolikelihood = -4908.3913

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       26,563             Number of obs    =      26,809
No. of failures      =        4,324
Time at risk         =  44454.26146
                                                Wald chi2(3)     =       13.23
Log pseudolikelihood =   -4908.3913             Prob > chi2      =      0.0042

                           (Std. Err. adjusted for 38 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   .9816884   .0271619    -0.67   0.504     .9298697    1.036395
Hospitali..  |   1.283616   .1193596     2.69   0.007     1.069755     1.54023
Critical ..  |   1.109624   .0498987     2.31   0.021     1.016011    1.211863
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  aki_date
   analysis time _t:  (exit_date_aki-origin)/365.25
             origin:  time index_date_aki
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -4911.2845
Iteration 1:   log pseudolikelihood = -4905.4581
Iteration 2:   log pseudolikelihood = -4905.4537
Refining estimates:
Iteration 0:   log pseudolikelihood = -4905.4537

Stratified Cox regr. -- Breslow method for ties

No. of subjects      =       26,563             Number of obs    =      26,809
No. of failures      =        4,324
Time at risk         =  44454.26146
                                                Wald chi2(6)     =       45.56
Log pseudolikelihood =   -4905.4537             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 38 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   .9681988   .0296189    -1.06   0.291     .9118528    1.028026
Hospitali..  |   1.269503   .1195725     2.53   0.011     1.055505    1.526888
Critical ..  |   1.102415   .0483574     2.22   0.026     1.011597    1.201388
             |
         sex |
       Male  |          1  (omitted)
        age1 |   1.006261   .0052736     1.19   0.234     .9959775     1.01665
        age2 |   .9854418   .0152628    -0.95   0.344     .9559767    1.015815
        age3 |   1.048298   .0464695     1.06   0.287     .9610635     1.14345
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  aki_date
   analysis time _t:  (exit_date_aki-origin)/365.25
             origin:  time index_date_aki
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -98.558234
Iteration 1:   log pseudolikelihood = -83.458374
Iteration 2:   log pseudolikelihood = -82.715012
Iteration 3:   log pseudolikelihood = -82.691331
Iteration 4:   log pseudolikelihood = -82.691278
Refining estimates:
Iteration 0:   log pseudolikelihood = -82.691278

Stratified Cox regr. -- no ties

No. of subjects      =        3,202             Number of obs    =       3,204
No. of failures      =          506
Time at risk         =  5305.207392
                                                Wald chi2(25)    =      622.65
Log pseudolikelihood =   -82.691278             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 35 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   .6566526   .1335978    -2.07   0.039     .4407136    .9783966
Hospitali..  |      .1519   .0488827    -5.86   0.000     .0808414    .2854183
Critical ..  |   .2065776   .1636465    -1.99   0.047       .04373    .9758598
             |
         sex |
       Male  |          1  (omitted)
             |
   ethnicity |
South Asian  |   .5715157   .1703018    -1.88   0.060      .318702    1.024876
      Black  |   2.164207   1.190387     1.40   0.160     .7363924    6.360458
      Mixed  |   1.107552   .5255134     0.22   0.830     .4370028    2.807009
      Other  |   1.261104   1.062495     0.28   0.783     .2418821    6.575038
             |
         imd |
          2  |   .8006217   .1714466    -1.04   0.299     .5261983    1.218163
          3  |   1.317383   .2244391     1.62   0.106     .9433987    1.839624
          4  |   1.448126   .4372957     1.23   0.220     .8012463    2.617259
5 Least d..  |   2.156552   .4523006     3.66   0.000     1.429667    3.253009
             |
       urban |
      Urban  |   .9130147   .2718581    -0.31   0.760     .5093603    1.636555
             |
      region |
       East  |   .7795582   .2687822    -0.72   0.470     .3966108     1.53226
     London  |   1.220086    .350102     0.69   0.488     .6952474    2.141123
 North East  |   1.251805   .2417261     1.16   0.245     .8573691    1.827702
 North West  |   2.017985   .6285081     2.25   0.024     1.095994    3.715587
 South East  |   .8770891   .2374351    -0.48   0.628     .5159607    1.490977
 South West  |   .9664923   .5432959    -0.06   0.952     .3211524    2.908611
West Midl..  |   2.016085   .5313307     2.66   0.008     1.202758    3.379398
Yorkshire..  |   1.655049   .9706301     0.86   0.390     .5243367    5.224102
             |
         bmi |
Normal (..)  |   .1405696   .0583814    -4.72   0.000      .062283    .3172582
Overweig..)  |   .2096962   .0869254    -3.77   0.000     .0930555    .4725406
Obese I ..)  |   .1631636   .0658472    -4.49   0.000     .0739789    .3598643
Obese II..)  |   .1495679   .0681867    -4.17   0.000     .0612045    .3655052
Obese II..)  |   .3034851   .1718239    -2.11   0.035     .1000492    .9205796
             |
     smoking |
Current/f..  |   1.697678   .3683993     2.44   0.015      1.10954    2.597572
        age1 |   1.167707   .0607335     2.98   0.003     1.054538    1.293021
        age2 |   .6942998   .1241108    -2.04   0.041     .4890902    .9856099
        age3 |   2.648591   1.361523     1.89   0.058     .9670522    7.254037
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  aki_date
   analysis time _t:  (exit_date_aki-origin)/365.25
             origin:  time index_date_aki
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -98.558234
Iteration 1:   log pseudolikelihood = -79.391785
Iteration 2:   log pseudolikelihood = -77.989218
Iteration 3:   log pseudolikelihood =  -77.90361
Iteration 4:   log pseudolikelihood = -77.902978
Iteration 5:   log pseudolikelihood = -77.902978
Refining estimates:
Iteration 0:   log pseudolikelihood = -77.902978

Stratified Cox regr. -- no ties

No. of subjects      =        3,202             Number of obs    =       3,204
No. of failures      =          506
Time at risk         =  5305.207392
                                                Wald chi2(25)    =     5506.18
Log pseudolikelihood =   -77.902978             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 35 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   .6243165   .1442715    -2.04   0.041     .3969201    .9819888
Hospitali..  |   .1035757   .0482945    -4.86   0.000     .0415304    .2583149
Critical ..  |   .1740372   .1020747    -2.98   0.003     .0551319    .5493904
             |
         sex |
       Male  |          1  (omitted)
             |
   ethnicity |
South Asian  |   .5032254   .1993653    -1.73   0.083      .231493    1.093924
      Black  |   2.938127   2.299685     1.38   0.169     .6336232    13.62417
      Mixed  |   .7745061   .4024699    -0.49   0.623      .279705    2.144615
      Other  |   1.666312   1.286286     0.66   0.508     .3670143    7.565358
             |
         imd |
          2  |   .8767586   .1982196    -0.58   0.561     .5629094    1.365594
          3  |   1.369528   .3366999     1.28   0.201     .8458666    2.217378
          4  |   1.428014    .521396     0.98   0.329     .6981395    2.920942
5 Least d..  |   2.231061   .5557651     3.22   0.001     1.369223    3.635371
             |
       urban |
      Urban  |   .8138583   .2479396    -0.68   0.499     .4479533    1.478648
             |
      region |
       East  |   .9052981   .2682934    -0.34   0.737     .5064426    1.618277
     London  |   1.434744   .3759084     1.38   0.168     .8585321    2.397687
 North East  |   1.977554    .756323     1.78   0.075     .9345083     4.18479
 North West  |    3.26964   1.147928     3.37   0.001     1.643062    6.506474
 South East  |   1.227257   .3929225     0.64   0.522     .6552581    2.298576
 South West  |   1.038375   .6772225     0.06   0.954     .2892049    3.728234
West Midl..  |   2.084251   .6200365     2.47   0.014       1.1634    3.733971
Yorkshire..  |   2.158345   1.753866     0.95   0.344     .4389718    10.61219
             |
         bmi |
Normal (..)  |   .1736945   .0781398    -3.89   0.000     .0719212    .4194839
Overweig..)  |   .2498035   .1107572    -3.13   0.002     .1047599     .595665
Obese I ..)  |   .2124089   .0883614    -3.72   0.000     .0939887    .4800315
Obese II..)  |   .1800094   .0981822    -3.14   0.002     .0618053    .5242817
Obese II..)  |   .3616793    .210357    -1.75   0.080     .1156791    1.130818
             |
1.cardiova~r |   .3805126   .1248426    -2.95   0.003     .2000313     .723836
  1.diabetes |   .9195204   .3315576    -0.23   0.816     .4535633    1.864167
1.hyperten~n |   .4629937   .1396781    -2.55   0.011     .2563189    .8363144
1.immunosu~d |   .9576499   .4291967    -0.10   0.923     .3978486    2.305132
1.non_haem~r |   .8787208   .4039597    -0.28   0.779     .3568964    2.163514
             |
     smoking |
Current/f..  |   1.966218   .4519038     2.94   0.003     1.253131    3.085082
        age1 |   1.160545   .0696617     2.48   0.013     1.031736    1.305435
        age2 |   .7116933    .142537    -1.70   0.089      .480635     1.05383
        age3 |   2.432935   1.394302     1.55   0.121     .7912458    7.480827
------------------------------------------------------------------------------
                                                          Stratified by set_id

                id:  patient_id
     failure event:  death_date != 0 & death_date < .
obs. time interval:  (exit_date_death[_n-1], exit_date_death]
 exit on or before:  failure
    t for analysis:  (time-origin)/365.25
            origin:  time index_date_death

------------------------------------------------------------------------------
     27,845  total observations
         12  observations begin on or after (first) failure
------------------------------------------------------------------------------
     27,833  observations remaining, representing
     27,534  subjects
      1,667  failures in single-failure-per-subject data
 50,214.486  total analysis time at risk and under observation
                                                at risk from t =         0
                                     earliest observed entry t =         0
                                          last observed exit t =  5.744011

         failure _d:  death_date
   analysis time _t:  (exit_date_death-origin)/365.25
             origin:  time index_date_death
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -2067.0879
Iteration 1:   log pseudolikelihood = -2023.1665
Iteration 2:   log pseudolikelihood = -2021.9179
Iteration 3:   log pseudolikelihood =  -2021.906
Iteration 4:   log pseudolikelihood =  -2021.906
Refining estimates:
Iteration 0:   log pseudolikelihood =  -2021.906

Stratified Cox regr. -- no ties

No. of subjects      =       27,534             Number of obs    =      27,833
No. of failures      =        1,667
Time at risk         =  50214.48597
                                                Wald chi2(3)     =      150.54
Log pseudolikelihood =    -2021.906             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 38 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |    .586157    .031539    -9.93   0.000     .5274895    .6513495
Hospitali..  |   .2806593   .0423406    -8.42   0.000     .2088172    .3772181
Critical ..  |   .7774357   .1043103    -1.88   0.061     .5976637    1.011282
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  death_date
   analysis time _t:  (exit_date_death-origin)/365.25
             origin:  time index_date_death
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -2067.0879
Iteration 1:   log pseudolikelihood = -2019.1772
Iteration 2:   log pseudolikelihood = -2017.8867
Iteration 3:   log pseudolikelihood = -2017.8745
Iteration 4:   log pseudolikelihood = -2017.8745
Refining estimates:
Iteration 0:   log pseudolikelihood = -2017.8745

Stratified Cox regr. -- no ties

No. of subjects      =       27,534             Number of obs    =      27,833
No. of failures      =        1,667
Time at risk         =  50214.48597
                                                Wald chi2(6)     =      213.13
Log pseudolikelihood =   -2017.8745             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 38 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   .5741343   .0317937   -10.02   0.000     .5150824    .6399563
Hospitali..  |   .2700214   .0416449    -8.49   0.000     .1995809    .3653232
Critical ..  |   .7643409    .096547    -2.13   0.033     .5967169    .9790522
             |
         sex |
       Male  |          1  (omitted)
        age1 |   1.005662   .0055579     1.02   0.307     .9948278    1.016615
        age2 |   .9685037   .0158265    -1.96   0.050     .9379759    1.000025
        age3 |   1.134888   .0553399     2.59   0.009     1.031446    1.248704
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  death_date
   analysis time _t:  (exit_date_death-origin)/365.25
             origin:  time index_date_death
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -55.111976
Iteration 1:   log pseudolikelihood = -35.489758
Iteration 2:   log pseudolikelihood = -33.059152
Iteration 3:   log pseudolikelihood = -32.708975
Iteration 4:   log pseudolikelihood = -32.696404
Iteration 5:   log pseudolikelihood = -32.696379
Iteration 6:   log pseudolikelihood = -32.696379
Refining estimates:
Iteration 0:   log pseudolikelihood = -32.696379

Stratified Cox regr. -- no ties

No. of subjects      =        3,323             Number of obs    =       3,325
No. of failures      =          228
Time at risk         =   5981.61807
                                                Wald chi2(21)    =    1.81e+07
Log pseudolikelihood =   -32.696379             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 35 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   .1554061   .0717165    -4.03   0.000      .062901    .3839537
Hospitali..  |   .3296664   .2717199    -1.35   0.178     .0655378    1.658279
Critical ..  |   3.031175   2.621765     1.28   0.200     .5563889    16.51367
             |
         sex |
       Male  |          1  (omitted)
             |
   ethnicity |
South Asian  |   .2338435   .2031484    -1.67   0.094     .0426045    1.283498
      Black  |   4.000802   3.921081     1.41   0.157     .5860125    27.31413
      Mixed  |   .8858578   .5453069    -0.20   0.844     .2650882    2.960313
      Other  |   1.705069   2.049636     0.44   0.657     .1616314    17.98697
             |
         imd |
          2  |   .4365933   .2323577    -1.56   0.119     .1538375    1.239059
          3  |   .8931063   .2993229    -0.34   0.736     .4630465    1.722589
          4  |   .5265008   .4067411    -0.83   0.406     .1158283    2.393224
5 Least d..  |    4.09735   2.258048     2.56   0.010     1.391253    12.06702
             |
       urban |
      Urban  |    .585614    .272718    -1.15   0.251     .2350772    1.458856
             |
      region |
       East  |   12.95156   12.38764     2.68   0.007      1.98693    84.42319
     London  |   2.118649   1.270861     1.25   0.211     .6538376    6.865117
 North East  |   3.485643   3.324915     1.31   0.191      .537442    22.60655
 North West  |   11.47301   10.47758     2.67   0.008     1.915705    68.71099
 South East  |   10.20396   6.064724     3.91   0.000     3.183152    32.70999
 South West  |   1.860713   1.757876     0.66   0.511     .2920937    11.85323
West Midl..  |   3.309175   1.970465     2.01   0.044     1.030072    10.63095
Yorkshire..  |   9.739075   11.11955     1.99   0.046     1.039111    91.27954
             |
         bmi |
Normal (..)  |   .3369321   .3012714    -1.22   0.224     .0584025    1.943807
Overweig..)  |   .0877165   .1068297    -2.00   0.046     .0080613    .9544605
Obese I ..)  |   .0635229   .0600295    -2.92   0.004     .0099664     .404875
Obese II..)  |   .0555862   .0772722    -2.08   0.038     .0036449    .8477166
Obese II..)  |   1.043646   .7580903     0.06   0.953     .2513342    4.333657
             |
     smoking |
Current/f..  |   2.354751   .3814331     5.29   0.000     1.714208    3.234643
        age1 |    .970367   .0524176    -0.56   0.578     .8728821    1.078739
        age2 |   .9558803   .1628315    -0.26   0.791     .6845478     1.33476
        age3 |   1.479673   .7620876     0.76   0.447     .5392181    4.060381
------------------------------------------------------------------------------
                                                          Stratified by set_id

         failure _d:  death_date
   analysis time _t:  (exit_date_death-origin)/365.25
             origin:  time index_date_death
                 id:  patient_id

Iteration 0:   log pseudolikelihood = -55.111976
Iteration 1:   log pseudolikelihood =  -31.58511
Iteration 2:   log pseudolikelihood = -27.123391
Iteration 3:   log pseudolikelihood =  -25.45844
Iteration 4:   log pseudolikelihood = -25.041383
Iteration 5:   log pseudolikelihood = -24.995421
Iteration 6:   log pseudolikelihood = -24.994245
Iteration 7:   log pseudolikelihood = -24.994244
Refining estimates:
Iteration 0:   log pseudolikelihood = -24.994244

Stratified Cox regr. -- no ties

No. of subjects      =        3,323             Number of obs    =       3,325
No. of failures      =          228
Time at risk         =   5981.61807
                                                Wald chi2(21)    =  9816941.31
Log pseudolikelihood =   -24.994244             Prob > chi2      =      0.0000

                           (Std. Err. adjusted for 35 clusters in practice_id)
------------------------------------------------------------------------------
             |               Robust
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
covid_seve~y |
Non-hospi..  |   .0603382   .0603078    -2.81   0.005     .0085079    .4279214
Hospitali..  |   .8028096   .6731639    -0.26   0.793     .1551928     4.15292
Critical ..  |   9.795563   13.05962     1.71   0.087     .7181126    133.6184
             |
         sex |
       Male  |          1  (omitted)
             |
   ethnicity |
South Asian  |   1.921979   1.186834     1.06   0.290     .5729624    6.447198
      Black  |   79.10442   104.9208     3.30   0.001     5.877639     1064.63
      Mixed  |   .7035794   .5609792    -0.44   0.659     .1474455    3.357335
      Other  |   4.778204   10.53056     0.71   0.478     .0635806    359.0915
             |
         imd |
          2  |   .2007923   .2656179    -1.21   0.225     .0150223    2.683851
          3  |   .3020454   .2807515    -1.29   0.198     .0488517    1.867519
          4  |   .3466389   .4813015    -0.76   0.445     .0228034    5.269319
5 Least d..  |   2.782721   1.028624     2.77   0.006     1.348422    5.742666
             |
       urban |
      Urban  |   .3524466    .219718    -1.67   0.094     .1038598    1.196022
             |
      region |
       East  |   16.68833    24.2584     1.94   0.053     .9662599    288.2252
     London  |   1.923219   1.642373     0.77   0.444     .3606846    10.25487
 North East  |   4.697028     6.7136     1.08   0.279     .2852172    77.35182
 North West  |   46.15347   98.68847     1.79   0.073     .6984057    3050.008
 South East  |   25.93569   39.07589     2.16   0.031     1.353438    497.0007
 South West  |   .8098404   1.201292    -0.14   0.887     .0442337    14.82674
West Midl..  |   4.847338   4.542266     1.68   0.092     .7724546    30.41821
Yorkshire..  |   56.35816   113.7734     2.00   0.046     1.077923    2946.632
             |
         bmi |
Normal (..)  |   .0034069   .0084799    -2.28   0.022     .0000259    .4477561
Overweig..)  |   .0036529   .0086742    -2.36   0.018     .0000348    .3836023
Obese I ..)  |   .0002935   .0006885    -3.47   0.001     2.96e-06    .0291399
Obese II..)  |   .0005707   .0016476    -2.59   0.010     1.99e-06    .1636707
Obese II..)  |   .0413193   .0264121    -4.98   0.000     .0118045    .1446298
             |
1.cardiova~r |   .2536367   .1922833    -1.81   0.070        .0574    1.120759
  1.diabetes |   1.002696   .3359839     0.01   0.994     .5199342    1.933706
1.hyperten~n |    1.18811   .9810237     0.21   0.835     .2355152    5.993694
1.immunosu~d |   .0011905   .0022315    -3.59   0.000     .0000302     .046902
1.non_haem~r |   12.25708   10.43793     2.94   0.003     2.309497    65.05138
             |
     smoking |
Current/f..  |   5.377315   3.015195     3.00   0.003     1.791742    16.13821
        age1 |   .9494281   .1066748    -0.46   0.644     .7617698    1.183315
        age2 |   .9851355   .3381114    -0.04   0.965     .5027504    1.930365
        age3 |   1.605074    1.43091     0.53   0.596     .2796764    9.211582
------------------------------------------------------------------------------
                                                          Stratified by set_id

. 
. file close tablecontent

. 
end of do-file

. . file open output using "/tmp/cox_2017_covid_severity.do.hhsR.out", write te
> xt replace

. . file write output "success" 

. . file close output

. 
end of do-file


